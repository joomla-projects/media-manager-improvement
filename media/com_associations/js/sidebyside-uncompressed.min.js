jQuery(document).ready(function(a){a("#toolbar-target").hide(),a("#toolbar-copy").hide(),Joomla.submitbutton=function(b){if("association.cancel"==b)Joomla.submitform(b);else if("copy"==b)window.frames["reference-association"].Joomla.submitbutton(document.getElementById("adminForm").getAttribute("data-associatedview")+".save2copy");else if("undo-association"==b){var c=document.getElementById("reference-association"),d=document.getElementById("target-association"),e=(c.getAttribute("data-id"),c.getAttribute("data-language").replace(/-/,"_")),f=(d.getAttribute("data-id"),d.getAttribute("data-language").replace(/-/,"_"));c=a(c).contents(),d=a(d).contents(),c.find("#jform_associations_"+f+"_id").val(""),c.find("#jform_associations_"+f+"_name").val(""),c.find("#jform_associations_"+f+"_chzn").remove(),c.find("#jform_associations_"+f).val("").change().chosen();var g="";a("#jform_itemlanguage option").each(function(){void 0!==(g=a(this).val().split("|")[0])&&(g=g.replace(/-/,"_"),d.find("#jform_associations_"+g+"_id").val(""),d.find("#jform_associations_"+g+"_chzn").remove(),d.find("#jform_associations_"+g).val("").change().chosen())}),d.find("#jform_associations_"+e+"_id").val(""),d.find("#jform_associations_"+e+"_name").val(""),d.find("#jform_associations_"+e+"_chzn").remove(),d.find("#jform_associations_"+e).val("").change().chosen();var h=a("#jform_itemlanguage").val(),i=f.replace(/_/,"-");a('#jform_itemlanguage option[value="'+h+'"]').val(i+":0:add"),a("#jform_itemlanguage").val("").change(),a("#jform_itemlanguage").trigger("liszt:updated"),Joomla.submitbutton("reference")}else a("#"+b+"-association").contents().find("#jform_language").attr("disabled",!1),window.frames[b+"-association"].Joomla.submitbutton(document.getElementById("adminForm").getAttribute("data-associatedview")+".apply");return!1},Joomla.loadingLayer("load"),a("body").on("click","#toogle-left-panel",function(){var b=this.getAttribute("data-hide-reference"),c=this.getAttribute("data-show-reference");a(this).text()===b?a(this).text(c):a(this).text(b),a("#left-panel").toggle(),a("#right-panel").toggleClass("full-width")}),a("body").on("change","#jform_itemlanguage",function(){var b=document.getElementById("target-association"),c=a(this).val();""!=c&&void 0!==c?(b.setAttribute("data-action",c.split(":")[2]),b.setAttribute("data-id",c.split(":")[1]),b.setAttribute("data-language",c.split(":")[0]),Joomla.loadingLayer("show"),b.src=b.getAttribute("data-editurl")+"&task="+b.getAttribute("data-item")+"."+b.getAttribute("data-action")+"&id="+b.getAttribute("data-id")):(a("#toolbar-target").hide(),a("#toolbar-copy").hide(),a("#select-change").addClass("hidden"),a("#remove-assoc").addClass("hidden"),b.setAttribute("data-action",""),b.setAttribute("data-id","0"),b.setAttribute("data-language",""),b.src="")}),a("#reference-association").on("load",function(){if(a(this).contents().find("#jform_id").val()!==this.getAttribute("data-id")){var b=document.getElementById("target-association");b.src=b.getAttribute("data-editurl")+"&task="+b.getAttribute("data-item")+".edit&id="+a(this).contents().find("#jform_id").val(),this.src=this.getAttribute("data-editurl")+"&task="+this.getAttribute("data-item")+".edit&id="+this.getAttribute("data-id")}var c=a(this).contents();c.find("#jform_language_chzn").remove(),c.find("#jform_language").attr("disabled",!0).chosen(),c.find("#associations").find(".btn").remove();var d="";a("#jform_itemlanguage option").each(function(){d=a(this).val().split(":"),void 0!==d[0]&&(langAssociation=d[0].replace(/-/,"_"),""==c.find("#jform_associations_"+langAssociation+"_id").val()&&c.find("#jform_associations_"+langAssociation+"_name").val(document.getElementById("reference-association").getAttribute("data-no-assoc")))}),Joomla.loadingLayer("hide")}),a("#target-association").on("load",function(){if(""!=this.getAttribute("src")){a("#toolbar-target").show(),a("#toolbar-copy").show(),a("#select-change").removeClass("hidden");var b=this.getAttribute("data-language"),c=this.getAttribute("data-id"),d=a(this).contents().find("#jform_id").val()||"0";if(a(this).contents().find('a[href="#associations"]').parent().find(".btn").remove(),a(this).contents().find("#associations").find(".btn").remove(),a(this).contents().find("#associations").hasClass("active")&&(a(this).contents().find('a[href="#associations"]').parent().removeClass("active"),a(this).contents().find("#associations").removeClass("active"),a(this).contents().find(".nav-tabs").find("li").first().addClass("active"),a(this).contents().find(".tab-content").find(".tab-pane").first().addClass("active")),a(this).contents().find("#jform_language_chzn").remove(),a(this).contents().find("#jform_language").val(b).change().attr("disabled",!0).chosen(),"0"==d)document.getElementById("select-change-text").innerHTML=document.getElementById("select-change").getAttribute("data-select");else{document.getElementById("select-change-text").innerHTML=document.getElementById("select-change").getAttribute("data-change"),a("#remove-assoc").removeClass("hidden"),a("#toolbar-copy").hide();var e=document.getElementById("target-id").value,f=""==e?d:e+","+d;document.getElementById("target-id").value=f,d!=c&&(a('#jform_itemlanguage option[value^="'+b+":"+c+':add"]').val(b+":"+d+":edit"),this.setAttribute("data-id",d),this.setAttribute("data-action","edit"));var g=document.getElementById("reference-association"),h=b.replace(/-/,"_"),i=a(this).contents().find("#jform_title").val();a(g).contents().find("#jform_associations_"+h+"_id").val(d),a(g).contents().find("#jform_associations_"+h+"_name").val(i),a(g).contents().find("#jform_associations_"+h+"_chzn").remove(),a(g).contents().find("#jform_associations_"+h).append('<option value="'+d+'">'+i+"</option>"),a(g).contents().find("#jform_associations_"+h).val(d).change().chosen()}var g=document.getElementById("reference-association"),j=g.getAttribute("data-id"),h=g.getAttribute("data-language").replace(/-/,"_"),i=a(g).contents().find("#jform_title").val(),k=a(this).contents();k.find("#jform_associations_"+h+"_id").val(j),k.find("#jform_associations_"+h+"_name").val(i),k.find("#jform_associations_"+h+"_chzn").remove();var l=k.find("#jform_associations_"+h);l.append('<option value="'+j+'">'+i+"</option>"),l.val(j).change().chosen();var m,n;a("#jform_itemlanguage option").each(function(){m=a(this).val().split(":"),void 0!==m[1]&&"0"!==m[1]&&(n=m[0].replace(/-/,"_"),k.find("#jform_associations_"+n+"_id").val(m[1]),k.find("#jform_associations_"+n+"_chzn").remove(),l=k.find("#jform_associations_"+n),l.append('<option value="'+m[1]+'"></option>'),l.val(m[1]).change().chosen())}),Joomla.loadingLayer("hide")}})});