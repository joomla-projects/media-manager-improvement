Joomla=window.Joomla||{},function(t,e){"use strict";var s={option:"com_ajax",group:"system",plugin:"renderStatsMessage",format:"raw"};t.initStatsEvents=function(){var n=e.getElementById("system-message-container"),a=n.querySelector(".js-pstats-alert"),o=n.querySelector(".js-pstats-data-details");n.querySelector(".js-pstats-btn-details"),n.querySelector(".js-pstats-btn-allow-always"),n.querySelector(".js-pstats-btn-allow-once"),n.querySelector(".js-pstats-btn-allow-never");e.addEventListener("click",function(t){t.target.classList.contains("js-pstats-btn-details")&&(t.preventDefault(),o.classList.toggle("d-none"))}),e.addEventListener("click",function(e){e.target.classList.contains("js-pstats-btn-allow-always")&&(e.preventDefault(),a.close(),s.plugin="sendAlways",t.getJson(s))}),e.addEventListener("click",function(e){e.target.classList.contains("js-pstats-btn-allow-once")&&(e.preventDefault(),a.close(),s.plugin="sendOnce",t.getJson(s))}),e.addEventListener("click",function(e){e.target.classList.contains("js-pstats-btn-allow-never")&&(e.preventDefault(),a.close(),s.plugin="sendNever",t.getJson(s))})},t.getJson=function(s){var n=e.getElementById("system-message-container");t.request({url:"index.php?option="+s.option+"&group="+s.group+"&plugin="+s.plugin+"&format="+s.format,method:"GET",perform:!0,headers:{"Content-Type":"application/json"},onSuccess:function(e,s){try{e=JSON.parse(e)}catch(t){throw new Error(t)}e&&e.html&&(n.innerHTML=e.html,n.querySelector(".js-pstats-alert").style.display="block",t.initStatsEvents())},onError:function(e){t.renderMessages({error:[e.response]})}})},e.addEventListener("DOMContentLoaded",function(){s.plugin="sendStats",t.getJson(s)})}(Joomla,document);