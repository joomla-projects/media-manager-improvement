!function(t){"use strict";t.fieldUser=function(i,e){this.options=t.extend({},t.fieldUser.defaults,e),this.$container=t(i),this.$modal=this.$container.find(this.options.modal),this.$modalBody=this.$modal.find(".modal-body"),this.$input=this.$container.find(this.options.input),this.$inputName=this.$container.find(this.options.inputName),this.$buttonSelect=this.$container.find(this.options.buttonSelect),this.$buttonSelect.on("click",this.modalOpen.bind(this)),this.$modal.on("hide",this.removeIframe.bind(this));var o,n=this.$input.attr("data-onchange");n&&(o=new Function(n),this.$input.on("change",o.bind(this.$input)))},t.fieldUser.prototype.modalOpen=function(){var i=t("<iframe>",{name:"field-user-modal",src:this.options.url.replace("{field-user-id}",this.$input.attr("id")),width:this.options.modalWidth,height:this.options.modalHeight});this.$modalBody.append(i),this.$modal.modal("show"),t("body").addClass("modal-open");var e=this;i.load(function(){t(this).contents().on("click",".button-select",function(){e.setValue(t(this).data("user-value"),t(this).data("user-name")),e.modalClose(),t("body").removeClass("modal-open")})})},t.fieldUser.prototype.modalClose=function(){this.$modal.modal("hide"),this.$modalBody.empty(),t("body").removeClass("modal-open")},t.fieldUser.prototype.removeIframe=function(){this.$modalBody.empty(),t("body").removeClass("modal-open")},t.fieldUser.prototype.setValue=function(t,i){this.$input.val(t).trigger("change"),this.$inputName.val(i||t).trigger("change")},t.fieldUser.defaults={buttonSelect:".button-select",input:".field-user-input",inputName:".field-user-input-name",modal:".modal",url:"index.php?option=com_users&view=users&layout=modal&tmpl=component",modalWidth:"100%",modalHeight:"300px"},t.fn.fieldUser=function(i){return this.each(function(){var i=t(this),e=i.data("fieldUser");if(!e){var o=o||{},n=i.data();for(var s in n)n.hasOwnProperty(s)&&(o[s]=n[s]);e=new t.fieldUser(this,o),i.data("fieldUser",e)}})},t(document).ready(function(){t(".field-user-wrapper").fieldUser()})}(jQuery);