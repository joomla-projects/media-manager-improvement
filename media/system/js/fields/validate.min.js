var JFormValidator=function(){"use strict";var e,t,a,r=function(t,a,r){r=""===r||r,e[t]={enabled:r,exec:a}},s=function(e,t,a){"button"!==t.tagName.toLowerCase()&&"undefined"!==t.value&&(!1===e?n(t,a):i(t))},i=function(e){var t,a=e.form.querySelector('label[for="'+e.id+'"]');(e.classList.contains("required")||e.getAttribute("required"))&&(a&&(t=a.querySelector("span.form-control-feedback")));e.classList.remove("form-control-danger"),e.classList.add("form-control-success"),e.parentNode.classList.remove("has-danger"),e.parentNode.classList.add("has-success"),e.setAttribute("aria-invalid","false"),t&&t.parentNode.removeChild(t),a&&a.classList.remove("invalid")},n=function(e,t){var a=e.form.querySelector('label[for="'+e.id+'"]');e.classList.remove("form-control-success"),e.classList.add("form-control-danger"),e.classList.add("invalid"),e.parentNode.classList.remove("has-success"),e.parentNode.classList.add("has-danger"),e.setAttribute("aria-invalid","true");var r,s=e.getAttribute("data-validation-text");if(a&&(r=a.querySelector("span.form-control-feedback")),!r){var i=document.createElement("span");i.classList.add("form-control-feedback"),i.innerHTML=t&&"checkbox"===t?s||Joomla.JText._("JLIB_FORM_FIELD_REQUIRED_CHECK"):t&&"value"===t?s||Joomla.JText._("JLIB_FORM_FIELD_REQUIRED_VALUE"):s||Joomla.JText._("JLIB_FORM_FIELD_INVALID_VALUE"),a&&a.appendChild(i)}a&&a.classList.add("invalid")},o=function(t){var a,r;if("disabled"===t.getAttribute("disabled")||"none"===t.getAttribute("display"))return s(!0,t),!0;if(t.getAttribute("required")||t.classList.contains("required"))if("fieldset"===(a=t.tagName.toLowerCase())&&(t.classList.contains("radio")||t.classList.contains("checkboxes"))){if(!t.querySelector("input:checked").length)return s(!1,t,"checkbox"),!1}else{if("checkbox"===t.getAttribute("type")&&0!==!t.checked.length||"select"===a&&!t.value.length)return s(!1,t,"checkbox"),!1;if(!t.value||t.classList.contains("placeholder"))return s(!1,t,"value"),!1}return r=t.getAttribute("class")&&t.getAttribute("class").match(/validate-([a-zA-Z0-9\_\-]+)/)?t.getAttribute("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"",t.getAttribute("pattern")&&""!=t.getAttribute("pattern")?t.value.length?(l=new RegExp("^"+t.getAttribute("pattern")+"$").test(t.value),s(l,t,"empty"),l):(s(!1,t),!1):""===r?(s(!0,t),!0):r&&"none"!==r&&e[r]&&t.value&&!0!==e[r].exec(t.value,t)?(s(!1,t,"invalid_value"),!1):(s(!0,t),!0)},l=function(e){var t,r,s,i,n=!0,l=[];for(s=0,i=(t=e.querySelectorAll("input, textarea, select, button")).length;s<i;s++)!1===o(t[s])&&(n=!1,l.push(t[s]));for(var c in a)a.hasOwnProperty(c)&&!0!==a[validator].exec()&&(n=!1);return function(e,t){for(var a=0,r=e.length;a<r;++a)t(e[a],a)}(a,function(e,t){!0!==t.exec()&&(n=!1)}),!n&&l.length>0&&(r={error:[e.getAttribute("data-validation-text")?e.getAttribute("data-validation-text"):Joomla.JText._("JLIB_FORM_CONTAINS_INVALID_FIELDS")]},Joomla.renderMessages(r)),n},c=function(e){for(var a,r=[],s=0,i=(a=e.querySelectorAll("input, textarea, select, button, fieldset")).length;s<i;s++){var n=a[s],c=n.tagName.toLowerCase();["input","textarea","select","fieldset"].indexOf(c)>-1&&n.classList.contains("required")&&(n.setAttribute("required",""),n.setAttribute("aria-required","true")),"input"!==c&&"button"!==c||"submit"!==n.getAttribute("type")&&"image"!==n.getAttribute("type")?"button"===c||"input"===c&&"button"===n.getAttribute("type")||(n.classList.contains("required")&&n.setAttribute("aria-required",!0),"fieldset"!==c&&(n.addEventListener("blur",function(){return o(this)}),n.addEventListener("focus",function(){return(a=(e=this).form.querySelector('label[for="'+e.id+'"]'))&&(t=a.querySelector("span.form-control-feedback")),e.classList.remove("form-control-danger"),e.classList.remove("form-control-success"),e.classList.remove("invalid"),e.classList.add("valid"),e.parentNode.classList.remove("has-danger"),e.parentNode.classList.remove("has-success"),t&&a&&a.removeChild(t),void(a&&a.classList.remove("invalid"));var e,t,a}),n.classList.contains("validate-email")&&t&&n.setAttribute("type","email")),r.push(n)):n.classList.contains("validate")&&n.addEventListener("click",function(){return l(e)})}};return function(){var s;e={},a=a||{},(s=document.createElement("input")).setAttribute("type","email"),t="text"!==s.type,r("username",function(e,t){return!new RegExp("[<|>|\"|'|%|;|(|)|&]","i").test(e)}),r("password",function(e,t){return/^\S[\S ]{2,98}\S$/.test(e)}),r("numeric",function(e,t){return/^(\d|-)?(\d|,)*\.?\d*$/.test(e)}),r("email",function(e,t){return e=punycode.toASCII(e),/^[a-zA-Z0-9.!#$%&â€™*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)});for(var i=document.querySelectorAll("form"),n=0,o=i.length;n<o;n++)i[n].classList.contains("form-validate")&&c(i[n])}(),{isValid:l,validate:o,setHandler:r,attachToForm:c,custom:a}};document.formvalidator=null,document.addEventListener("DOMContentLoaded",function(){document.formvalidator=new JFormValidator});