var JFormValidator=function(){"use strict";var a,b,c,d=function(a,b){for(var c=0,d=a.length;c<d;++c)b(a[c],c)},e=function(b,c,d){d=""===d||d,a[b]={enabled:d,exec:c}},f=function(a,b,c){a===!1?h(b,c):g(b)},g=function(a){var b=a.form.querySelector('label[for="'+a.id+'"]');if(a.classList.contains("required")||a.getAttribute("required")){var c;c="span"===a.parentNode.tagName.toLowerCase()&&a.parentNode.classList.contains("input-group")?a.parentNode.parentNode.querySelector("span.invalid"):a.parentNode.querySelector("span.invalid")}a.classList.remove("invalid"),a.classList.add("valid"),a.setAttribute("aria-invalid","false"),c&&a.parentNode.removeChild(c),b&&b.classList.remove("invalid")},h=function(a,b){var c=a.form.querySelector('label[for="'+a.id+'"]');a.classList.remove("valid"),a.classList.add("invalid"),a.setAttribute("aria-invalid","true");var d,e=a.getAttribute("data-validation-text");if(d="span"===a.parentNode.tagName.toLowerCase()&&a.parentNode.classList.contains("input-group")?a.parentNode.parentNode.querySelector("span.invalid"):a.parentNode.querySelector("span.invalid"),!d){var f=document.createElement("span");f.classList.add("invalid"),b&&"checkbox"===b?f.innerHTML=e?e:Joomla.JText._("JLIB_FORM_FIELD_REQUIRED_CHECK"):b&&"value"===b?f.innerHTML=e?e:Joomla.JText._("JLIB_FORM_FIELD_REQUIRED_VALUE"):f.innerHTML=e?e:Joomla.JText._("JLIB_FORM_FIELD_INVALID_VALUE"),"span"===a.parentNode.tagName.toLowerCase()&&a.parentNode.classList.contains("input-group")?a.parentNode.parentNode.appendChild(f):a.parentNode.appendChild(f)}c&&c.classList.add("invalid")},i=function(a){var b,c=a.form.querySelector('label[for="'+a.id+'"]');b="span"===a.parentNode.tagName.toLowerCase()&&a.parentNode.classList.contains("input-group")?a.parentNode.parentNode.querySelector("span.invalid"):a.parentNode.querySelector("span.invalid"),a.classList.remove("invalid"),a.classList.remove("valid"),b&&("span"===a.parentNode.tagName.toLowerCase()&&a.parentNode.classList.contains("input-group")?(console.log(a.parentNode.parentNode),a.parentNode.parentNode.removeChild(b)):a.parentNode.removeChild(b)),c&&(c.classList.remove("invalid"),c.classList.remove("valid"))},j=function(b){var c,d;if("disabled"===b.getAttribute("disabled")||"none"===b.getAttribute("display"))return f(!0,b),!0;if(b.getAttribute("required")||b.classList.contains("required"))if(c=b.tagName.toLowerCase(),"fieldset"===c&&(b.classList.contains("radio")||b.classList.contains("checkboxes"))){if(!b.querySelector("input:checked").length)return f(!1,b,"checkbox"),!1}else{if("checkbox"===b.getAttribute("type")&&0!==!b.checked.length||"select"===c&&!b.value.length)return f(!1,b,"checkbox"),!1;if(!b.value||b.classList.contains("placeholder"))return f(!1,b,"value"),!1}return d=b.getAttribute("class")&&b.getAttribute("class").match(/validate-([a-zA-Z0-9\_\-]+)/)?b.getAttribute("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"",b.getAttribute("pattern")&&""!=b.getAttribute("pattern")?b.value.length?(k=new RegExp("^"+b.getAttribute("pattern")+"$").test(b.value),f(k,b,"empty"),k):(f(!1,b),!1):""===d?(f(!0,b),!0):d&&"none"!==d&&a[d]&&b.value&&a[d].exec(b.value,b)!==!0?(f(!1,b,"value"),!1):(f(!0,b),!0)},k=function(a){var b,e,f,g,h,i=!0,k=[];for(b=a.querySelectorAll("input, textarea, select, button"),g=0,h=b.length;g<h;g++)j(b[g])===!1&&(i=!1,k.push(b[g]));for(var l in c)c.hasOwnProperty(l)&&c[validator].exec()!==!0&&(i=!1);return d(c,function(a,b){b.exec()!==!0&&(i=!1)}),!i&&k.length>0&&(e=a.getAttribute("data-validation-text")?a.getAttribute("data-validation-text"):Joomla.JText._("JLIB_FORM_CONTAINS_INVALID_FIELDS"),f={error:[e]},Joomla.renderMessages(f)),i},l=function(a){var c,d=[];c=a.querySelectorAll("input, textarea, select, button, fieldset");for(var e=0,f=c.length;e<f;e++){var g=c[e],h=g.tagName.toLowerCase();["input","textarea","select","fieldset"].indexOf(h)>-1&&g.classList.contains("required")&&(g.setAttribute("required",""),g.setAttribute("aria-required","true")),"input"!==h&&"button"!==h||"submit"!==g.getAttribute("type")&&"image"!==g.getAttribute("type")?"button"===h||"input"===h&&"button"===g.getAttribute("type")||(g.classList.contains("required")&&g.setAttribute("aria-required",!0),"fieldset"!==h&&(g.addEventListener("blur",function(){return j(this)}),g.addEventListener("focus",function(){return i(this)}),g.classList.contains("validate-email")&&b&&g.setAttribute("type","email")),d.push(g)):g.classList.contains("validate")&&g.addEventListener("click",function(){return k(a)})}},m=function(){a={},c=c||{},b=function(){var a=document.createElement("input");return a.setAttribute("type","email"),"text"!==a.type}(),e("username",function(a,b){var c=new RegExp("[<|>|\"|'|%|;|(|)|&]","i");return!c.test(a)}),e("password",function(a,b){var c=/^\S[\S ]{2,98}\S$/;return c.test(a)}),e("numeric",function(a,b){var c=/^(\d|-)?(\d|,)*\.?\d*$/;return c.test(a)}),e("email",function(a,b){a=punycode.toASCII(a);var c=/^[a-zA-Z0-9.!#$%&â€™*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return c.test(a)});for(var d=document.querySelectorAll("form"),f=0,g=d.length;f<g;f++)d[f].classList.contains("form-validate")&&l(d[f])};return m(),{isValid:k,validate:j,setHandler:e,attachToForm:l,custom:c}};document.formvalidator=null,document.addEventListener("DOMContentLoaded",function(){document.formvalidator=new JFormValidator});