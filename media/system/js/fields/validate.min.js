var JFormValidator=function(){"use strict";var e,t,a,r=function(e,t){for(var a=0,r=e.length;r>a;++a)t(e[a],a)},n=function(t,a,r){r=""===r?!0:r,e[t]={enabled:r,exec:a}},o=function(e,t,a){"button"!==t.tagName.toLowerCase()&&"undefined"!==t.value&&(e===!1?i(t,a):s(t))},s=function(e){var t=e.form.querySelector('label[for="'+e.id+'"]');if(e.classList.contains("required")||e.getAttribute("required")){var a;a="span"===e.parentNode.tagName.toLowerCase()&&e.parentNode.classList.contains("input-group")?e.parentNode.parentNode.querySelector("span.form-control-feedback"):e.parentNode.querySelector("span.form-control-feedback")}e.classList.remove("form-control-danger"),e.classList.add("form-control-success"),e.parentNode.classList.remove("has-danger"),e.parentNode.classList.add("has-success"),e.setAttribute("aria-invalid","false"),a&&e.parentNode.removeChild(a),t&&t.classList.remove("invalid")},i=function(e,t){var a=e.form.querySelector('label[for="'+e.id+'"]');e.classList.remove("form-control-success"),e.classList.add("form-control-danger"),e.classList.add("invalid"),e.parentNode.classList.remove("has-success"),e.parentNode.classList.add("has-danger"),e.setAttribute("aria-invalid","true");var r,n=e.getAttribute("data-validation-text");if(r="span"===e.parentNode.tagName.toLowerCase()&&e.parentNode.classList.contains("input-group")?e.parentNode.parentNode.querySelector("span.form-control-feedback"):e.parentNode.querySelector("span.form-control-feedback"),!r){var o=document.createElement("span");o.classList.add("form-control-feedback"),o.innerHTML=t&&"checkbox"===t?n?n:Joomla.JText._("JLIB_FORM_FIELD_REQUIRED_CHECK"):t&&"value"===t?n?n:Joomla.JText._("JLIB_FORM_FIELD_REQUIRED_VALUE"):n?n:Joomla.JText._("JLIB_FORM_FIELD_INVALID_VALUE"),"span"===e.parentNode.tagName.toLowerCase()&&e.parentNode.classList.contains("input-group")?e.parentNode.parentNode.appendChild(o):e.parentNode.appendChild(o)}a&&a.classList.add("invalid")},c=function(e){var t,a=e.form.querySelector('label[for="'+e.id+'"]');t="span"===e.parentNode.tagName.toLowerCase()&&e.parentNode.classList.contains("input-group")?e.parentNode.parentNode.querySelector("span.form-control-feedback"):e.parentNode.querySelector("span.form-control-feedback"),e.classList.remove("form-control-danger"),e.classList.remove("form-control-success"),e.classList.remove("invalid"),e.classList.add("valid"),e.parentNode.classList.remove("has-danger"),e.parentNode.classList.remove("has-success"),t&&("span"===e.parentNode.tagName.toLowerCase()&&e.parentNode.classList.contains("input-group")?e.parentNode.parentNode.removeChild(t):e.parentNode.removeChild(t)),a&&a.classList.remove("invalid")},l=function(t){var a,r;if("disabled"===t.getAttribute("disabled")||"none"===t.getAttribute("display"))return o(!0,t),!0;if(t.getAttribute("required")||t.classList.contains("required"))if(a=t.tagName.toLowerCase(),"fieldset"===a&&(t.classList.contains("radio")||t.classList.contains("checkboxes"))){if(!t.querySelector("input:checked").length)return o(!1,t,"checkbox"),!1}else{if("checkbox"===t.getAttribute("type")&&0!==!t.checked.length||"select"===a&&!t.value.length)return o(!1,t,"checkbox"),!1;if(!t.value||t.classList.contains("placeholder"))return o(!1,t,"value"),!1}return r=t.getAttribute("class")&&t.getAttribute("class").match(/validate-([a-zA-Z0-9\_\-]+)/)?t.getAttribute("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"",t.getAttribute("pattern")&&""!=t.getAttribute("pattern")?t.value.length?(d=RegExp("^"+t.getAttribute("pattern")+"$").test(t.value),o(d,t,"empty"),d):(o(!1,t),!1):""===r?(o(!0,t),!0):r&&"none"!==r&&e[r]&&t.value&&e[r].exec(t.value,t)!==!0?(o(!1,t,"value"),!1):(o(!0,t),!0)},d=function(e){var t,n,o,s,i,c=!0,d=[];for(t=e.querySelectorAll("input, textarea, select, button"),s=0,i=t.length;i>s;s++)l(t[s])===!1&&(c=!1,d.push(t[s]));for(var u in a)a.hasOwnProperty(u)&&a[validator].exec()!==!0&&(c=!1);return r(a,function(e,t){t.exec()!==!0&&(c=!1)}),!c&&d.length>0&&(n=e.getAttribute("data-validation-text")?e.getAttribute("data-validation-text"):Joomla.JText._("JLIB_FORM_CONTAINS_INVALID_FIELDS"),o={error:[n]},Joomla.renderMessages(o)),c},u=function(e){var a,r=[];a=e.querySelectorAll("input, textarea, select, button, fieldset");for(var n=0,o=a.length;o>n;n++){var s=a[n],i=s.tagName.toLowerCase();["input","textarea","select","fieldset"].indexOf(i)>-1&&s.classList.contains("required")&&(s.setAttribute("required",""),s.setAttribute("aria-required","true")),"input"!==i&&"button"!==i||"submit"!==s.getAttribute("type")&&"image"!==s.getAttribute("type")?"button"===i||"input"===i&&"button"===s.getAttribute("type")||(s.classList.contains("required")&&s.setAttribute("aria-required",!0),"fieldset"!==i&&(s.addEventListener("blur",function(){return l(this)}),s.addEventListener("focus",function(){return c(this)}),s.classList.contains("validate-email")&&t&&s.setAttribute("type","email")),r.push(s)):s.classList.contains("validate")&&s.addEventListener("click",function(){return d(e)})}},p=function(){e={},a=a||{},t=function(){var e=document.createElement("input");return e.setAttribute("type","email"),"text"!==e.type}(),n("username",function(e){var t=RegExp("[<|>|\"|'|%|;|(|)|&]","i");return!t.test(e)}),n("password",function(e){var t=/^\S[\S ]{2,98}\S$/;return t.test(e)}),n("numeric",function(e){var t=/^(\d|-)?(\d|,)*\.?\d*$/;return t.test(e)}),n("email",function(e){e=punycode.toASCII(e);var t=/^[a-zA-Z0-9.!#$%&â€™*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;return t.test(e)});for(var r=document.querySelectorAll("form"),o=0,s=r.length;s>o;o++)r[o].classList.contains("form-validate")&&u(r[o])};return p(),{isValid:d,validate:l,setHandler:n,attachToForm:u,custom:a}};document.formvalidator=null,document.addEventListener("DOMContentLoaded",function(){document.formvalidator=new JFormValidator});