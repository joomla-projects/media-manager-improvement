var JFormValidator=function(){"use strict";var e,t,a,r=function(e,t){for(var a=0,r=e.length;a<r;++a)t(e[a],a)},n=function(t,a,r){r=""===r||r,e[t]={enabled:r,exec:a}},i=function(e,t,a){!1===e?s(t,a):o(t)},o=function(e){var t=e.form.querySelector('label[for="'+e.id+'"]');if(e.classList.contains("required")||e.getAttribute("required")){var a;a="span"===e.parentNode.tagName.toLowerCase()&&e.parentNode.classList.contains("input-group")?e.parentNode.parentNode.querySelector("span.invalid"):e.parentNode.querySelector("span.invalid")}e.classList.remove("invalid"),e.classList.add("valid"),e.setAttribute("aria-invalid","false"),a&&e.parentNode.removeChild(a),t&&t.classList.remove("invalid")},s=function(e,t){var a=e.form.querySelector('label[for="'+e.id+'"]');e.classList.remove("valid"),e.classList.add("invalid"),e.setAttribute("aria-invalid","true");var r=e.getAttribute("data-validation-text");if(!("span"===e.parentNode.tagName.toLowerCase()&&e.parentNode.classList.contains("input-group")?e.parentNode.parentNode.querySelector("span.invalid"):e.parentNode.querySelector("span.invalid"))){var n=document.createElement("span");n.classList.add("invalid"),n.innerHTML=t&&"checkbox"===t?r||Joomla.JText._("JLIB_FORM_FIELD_REQUIRED_CHECK"):t&&"value"===t?r||Joomla.JText._("JLIB_FORM_FIELD_REQUIRED_VALUE"):r||Joomla.JText._("JLIB_FORM_FIELD_INVALID_VALUE"),"span"===e.parentNode.tagName.toLowerCase()&&e.parentNode.classList.contains("input-group")?e.parentNode.parentNode.appendChild(n):e.parentNode.appendChild(n)}a&&a.classList.add("invalid")},l=function(e){var t,a=e.form.querySelector('label[for="'+e.id+'"]');t="span"===e.parentNode.tagName.toLowerCase()&&e.parentNode.classList.contains("input-group")?e.parentNode.parentNode.querySelector("span.invalid"):e.parentNode.querySelector("span.invalid"),e.classList.remove("invalid"),e.classList.remove("valid"),t&&("span"===e.parentNode.tagName.toLowerCase()&&e.parentNode.classList.contains("input-group")?(console.log(e.parentNode.parentNode),e.parentNode.parentNode.removeChild(t)):e.parentNode.removeChild(t)),a&&(a.classList.remove("invalid"),a.classList.remove("valid"))},u=function(t){var a,r;if("disabled"===t.getAttribute("disabled")||"none"===t.getAttribute("display"))return i(!0,t),!0;if(t.getAttribute("required")||t.classList.contains("required"))if("fieldset"===(a=t.tagName.toLowerCase())&&(t.classList.contains("radio")||t.classList.contains("checkboxes"))){if(!t.querySelector("input:checked").length)return i(!1,t,"checkbox"),!1}else{if("checkbox"===t.getAttribute("type")&&0!==!t.checked.length||"select"===a&&!t.value.length)return i(!1,t,"checkbox"),!1;if(!t.value||t.classList.contains("placeholder"))return i(!1,t,"value"),!1}return r=t.getAttribute("class")&&t.getAttribute("class").match(/validate-([a-zA-Z0-9\_\-]+)/)?t.getAttribute("class").match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"",t.getAttribute("pattern")&&""!=t.getAttribute("pattern")?t.value.length?(d=new RegExp("^"+t.getAttribute("pattern")+"$").test(t.value),i(d,t,"empty"),d):(i(!1,t),!1):""===r?(i(!0,t),!0):r&&"none"!==r&&e[r]&&t.value&&!0!==e[r].exec(t.value,t)?(i(!1,t,"value"),!1):(i(!0,t),!0)},d=function(e){var t,n,i,o,s=!0,l=[];for(i=0,o=(t=e.querySelectorAll("input, textarea, select, button")).length;i<o;i++)!1===u(t[i])&&(s=!1,l.push(t[i]));for(var d in a)a.hasOwnProperty(d)&&!0!==a[validator].exec()&&(s=!1);return r(a,function(e,t){!0!==t.exec()&&(s=!1)}),!s&&l.length>0&&(n={error:[e.getAttribute("data-validation-text")?e.getAttribute("data-validation-text"):Joomla.JText._("JLIB_FORM_CONTAINS_INVALID_FIELDS")]},Joomla.renderMessages(n)),s},c=function(e){for(var a,r=[],n=0,i=(a=e.querySelectorAll("input, textarea, select, button, fieldset")).length;n<i;n++){var o=a[n],s=o.tagName.toLowerCase();["input","textarea","select","fieldset"].indexOf(s)>-1&&o.classList.contains("required")&&(o.setAttribute("required",""),o.setAttribute("aria-required","true")),"input"!==s&&"button"!==s||"submit"!==o.getAttribute("type")&&"image"!==o.getAttribute("type")?"button"===s||"input"===s&&"button"===o.getAttribute("type")||(o.classList.contains("required")&&o.setAttribute("aria-required",!0),"fieldset"!==s&&(o.addEventListener("blur",function(){return u(this)}),o.addEventListener("focus",function(){return l(this)}),o.classList.contains("validate-email")&&t&&o.setAttribute("type","email")),r.push(o)):o.classList.contains("validate")&&o.addEventListener("click",function(){return d(e)})}};return function(){e={},a=a||{},t=function(){var e=document.createElement("input");return e.setAttribute("type","email"),"text"!==e.type}(),n("username",function(e,t){return!new RegExp("[<|>|\"|'|%|;|(|)|&]","i").test(e)}),n("password",function(e,t){return/^\S[\S ]{2,98}\S$/.test(e)}),n("numeric",function(e,t){return/^(\d|-)?(\d|,)*\.?\d*$/.test(e)}),n("email",function(e,t){return e=punycode.toASCII(e),/^[a-zA-Z0-9.!#$%&â€™*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)});for(var r=document.querySelectorAll("form"),i=0,o=r.length;i<o;i++)r[i].classList.contains("form-validate")&&c(r[i])}(),{isValid:d,validate:u,setHandler:n,attachToForm:c,custom:a}};document.formvalidator=null,document.addEventListener("DOMContentLoaded",function(){document.formvalidator=new JFormValidator});