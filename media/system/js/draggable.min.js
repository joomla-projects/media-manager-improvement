document.addEventListener("DOMContentLoaded",function(){"use strict";var a,b,c,d=document.querySelector(".js-draggable"),e=d.querySelectorAll('[name="order[]"]');if(d)a=d.getAttribute("data-url"),b=d.getAttribute("data-direction"),c=d.getAttribute("data-nested");else if(Joomla.getOptions("draggable-list")){var f=Joomla.getOptions("draggable-list");d=document.querySelector(f.id),d.classList.contains("js-draggable")||d.classList.add("js-draggable"),a=f.url,b=f.direction,c=f.nested}if(d){for(var g=0,h=e.length;h>g;g++)e[g].setAttribute("data-order",g+1);document.addEventListener("touchstart",function(){},!1),Array.prototype.move=function(a,b){this.splice(b,0,this.splice(a,1)[0])};var i=function(a,b){var c,d,e=[],f=a.querySelectorAll('[name="order[]"]'),g=a.querySelectorAll('[name="cid[]"]');for("desc"===b&&(f=Array.prototype.slice.call(f),g=Array.prototype.slice.call(g),f.reverse(),g.reverse()),c=0,d=f.length;d>c;c++)f[c].value=c,e.push("order[]="+encodeURIComponent(c)),e.push("cid[]="+encodeURIComponent(g[c].value));return e};dragula([d],{direction:"vertical",copy:!1,revertOnSpill:!0,accepts:function(a,b,d,e){return c&&null!==e?e.getAttribute("data-dragable-group")&&e.getAttribute("data-dragable-group")==a.getAttribute("data-dragable-group"):null===e||e&&"tr"===e.tagName.toLowerCase()}}).on("drag",function(a,b){}).on("cloned",function(a,b){document.querySelector(".gu-mirror").classList.add("table")}).on("drop",function(){if(a){var c=document.querySelector('[name="task"]');c&&c.setAttribute("name","some__Temporary__Name__");var e={url:a,method:"POST",data:i(d,b).join("&"),perform:!0};Joomla.request(e),c&&c.setAttribute("name","task")}}).on("dragend",function(a){for(var b=d.querySelectorAll('[name="order[]"]'),c=0,e=b.length;e>c;c++)b[c].setAttribute("data-order",c+1)})}});