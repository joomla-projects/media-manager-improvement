!function(t){t.fn.ajaxChosen=function(e,n,a){var r,i,o,l;return null==e&&(e={}),null==n&&(n={}),null==a&&(a=function(){}),i={minTermLength:3,afterTypeDelay:500,jsonTermKey:"term",keepTypingMsg:Joomla.JText._("JGLOBAL_KEEP_TYPING"),lookingForMsg:Joomla.JText._("JGLOBAL_LOOKING_FOR")},l=this,r=null,o=t.extend({},i,t(l).data(),e),this.chosen(a||{}),this.each(function(){return t(this).next(".chzn-container").find(".search-field > input, .chzn-search > input").bind("keyup",function(){var e,a,i,u,s;return u=t(this).val(),a=(s=t.trim(t(this).val())).length<o.minTermLength?o.keepTypingMsg:o.lookingForMsg+" '"+s+"'",l.next(".chzn-container").find(".no-results").text(a),s!==t(this).data("prevVal")&&(t(this).data("prevVal",s),this.timer&&clearTimeout(this.timer),!(s.length<o.minTermLength)&&(e=t(this),null==o.data&&(o.data={}),o.data[o.jsonTermKey]=s,null!=o.dataCallback&&(o.data=o.dataCallback(o.data)),i=o.success,o.success=function(a){var r,o,s;if(null!=a)return s=[],l.find("option").each(function(){return t(this).is(":selected")?s.push(t(this).val()+"-"+t(this).text()):t(this).remove()}),l.find("optgroup:empty").each(function(){return t(this).remove()}),r=n.apply(null,a),o=0,t.each(r,function(e,n){var a,r,i;return o++,n.group?((a=l.find("optgroup[label='"+n.text+"']")).size()||(a=t("<optgroup />")),a.attr("label",n.text).appendTo(l),t.each(n.items,function(e,n){var r,i;if("string"==typeof n?(i=e,r=n):(i=n.value,r=n.text),-1===t.inArray(i+"-"+r,s))return t("<option />").attr("value",i).html(r).appendTo(a)})):("string"==typeof n?(i=e,r=n):(i=n.value,r=n.text),-1===t.inArray(i+"-"+r,s)?t("<option />").attr("value",i).html(r).appendTo(l):void 0)}),o?l.trigger("liszt:updated"):(l.data().chosen.no_results_clear(),l.data().chosen.no_results(e.val())),null!=i&&i(a),e.val(u)},this.timer=setTimeout(function(){return r&&r.abort(),r=t.ajax(o)},o.afterTypeDelay)))})})}}(jQuery),jQuery(document).ready(function(t){if(Joomla.getOptions("ajax-chosen")){var e=Joomla.getOptions("ajax-chosen");t(e.selector).ajaxChosen({type:e.type,url:e.url,dataType:e.dataType,jsonTermKey:e.jsonTermKey,afterTypeDelay:e.afterTypeDelay,minTermLength:e.minTermLength},function(e){var n=[];return t.each(e,function(t,e){n.push({value:e.value,text:e.text})}),n})}});