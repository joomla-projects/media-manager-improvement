!function(a){a.fn.ajaxChosen=function(b,c,d){var e,f,g,h;return null==b&&(b={}),null==c&&(c={}),null==d&&(d=function(){}),f={minTermLength:3,afterTypeDelay:500,jsonTermKey:"term",keepTypingMsg:Joomla.JText._("JGLOBAL_KEEP_TYPING"),lookingForMsg:Joomla.JText._("JGLOBAL_LOOKING_FOR")},h=this,e=null,g=a.extend({},f,a(h).data(),b),this.chosen(d?d:{}),this.each(function(){return a(this).next(".chzn-container").find(".search-field > input, .chzn-search > input").bind("keyup",function(){var b,d,f,i,j;return i=a(this).val(),j=a.trim(a(this).val()),d=j.length<g.minTermLength?g.keepTypingMsg:g.lookingForMsg+" '"+j+"'",h.next(".chzn-container").find(".no-results").text(d),j!==a(this).data("prevVal")&&(a(this).data("prevVal",j),this.timer&&clearTimeout(this.timer),!(j.length<g.minTermLength)&&(b=a(this),null==g.data&&(g.data={}),g.data[g.jsonTermKey]=j,null!=g.dataCallback&&(g.data=g.dataCallback(g.data)),f=g.success,g.success=function(d){var e,g,j;if(null!=d)return j=[],h.find("option").each(function(){return a(this).is(":selected")?j.push(a(this).val()+"-"+a(this).text()):a(this).remove()}),h.find("optgroup:empty").each(function(){return a(this).remove()}),e=c.apply(null,d),g=0,a.each(e,function(b,c){var d,e,f;return g++,c.group?(d=h.find("optgroup[label='"+c.text+"']"),d.size()||(d=a("<optgroup />")),d.attr("label",c.text).appendTo(h),a.each(c.items,function(b,c){var e,f;if("string"==typeof c?(f=b,e=c):(f=c.value,e=c.text),a.inArray(f+"-"+e,j)===-1)return a("<option />").attr("value",f).html(e).appendTo(d)})):("string"==typeof c?(f=b,e=c):(f=c.value,e=c.text),a.inArray(f+"-"+e,j)===-1?a("<option />").attr("value",f).html(e).appendTo(h):void 0)}),g?h.trigger("liszt:updated"):(h.data().chosen.no_results_clear(),h.data().chosen.no_results(b.val())),null!=f&&f(d),b.val(i)},this.timer=setTimeout(function(){return e&&e.abort(),e=a.ajax(g)},g.afterTypeDelay)))})})}}(jQuery),jQuery(document).ready(function(a){if(Joomla.getOptions("ajax-chosen")){var b=Joomla.getOptions("ajax-chosen");a(b.selector).ajaxChosen({type:b.type,url:b.url,dataType:b.dataType,jsonTermKey:b.jsonTermKey,afterTypeDelay:b.afterTypeDelay,minTermLength:b.minTermLength},function(b){var c=[];return a.each(b,function(a,b){c.push({value:b.value,text:b.text})}),c})}});