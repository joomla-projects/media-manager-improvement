!function(a,b,c){"use strict";"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b});var d=function(a,b){for(var c=["required","pattern","placeholder","autofocus","formnovalidate"],d=["email","url","number","range"],e={attributes:{},types:{}};b=c.pop();)e.attributes[b]=!!(b in a);for(;b=d.pop();)a.setAttribute("type",b),e.types[b]=a.type==b;return e}(b.createElement("input")),e={init:function(b,c){var d=this;d.elem=c,d.$elem=a(c),c.H5Form=d,d.options=a.extend({},a.fn.h5f.options,b),"form"===c.nodeName.toLowerCase()&&d.bindWithForm(d.elem,d.$elem)},bindWithForm:function(a,b){var e,f=this,g=!!b.attr("novalidate"),h=a.elements,i=h.length;for("onSubmit"===f.options.formValidationEvent&&b.on("submit",function(a){e=this.H5Form.donotValidate!==c&&this.H5Form.donotValidate,e||g||f.validateForm(f)?b.find(":input").each(function(){f.placeholder(f,this,"submit")}):(a.preventDefault(),this.donotValidate=!1)}),b.on("focusout focusin",function(a){f.placeholder(f,a.target,a.type)}),b.on("focusout change",f.validateField),b.find("fieldset").on("change",function(){f.validateField(this)}),d.attributes.formnovalidate||b.find(":submit[formnovalidate]").on("click",function(){f.donotValidate=!0});i--;)f.polyfill(h[i]),f.autofocus(f,h[i])},polyfill:function(a){if("form"===a.nodeName.toLowerCase())return!0;var b=a.form.H5Form;b.placeholder(b,a),b.numberType(b,a)},validateForm:function(){var a,b,c=this,d=c.elem,e=d.elements,f=e.length,g=!0;for(d.isValid=!0,a=0;a<f;a++)b=e[a],b.isRequired=!!b.required,b.isDisabled=!!b.disabled,b.isDisabled||(g=c.validateField(b),d.isValid&&!g&&c.setFocusOn(b),d.isValid=g&&d.isValid);return c.options.doRenderMessage&&c.renderErrorMessages(c,d),d.isValid},validateField:function(b){var e,f,g,h=b.target||b,i=!1,j=!1,k=!1,l=!1;return h.form===c?null:(e=h.form.H5Form,f=a(h),j=!!f.attr("required"),k=!!f.attr("disabled"),h.isDisabled||(i=!d.attributes.required&&j&&e.isValueMissing(e,h),l=!d.attributes.pattern&&e.matchPattern(e,h)),h.validityState={valueMissing:i,patternMismatch:l,valid:h.isDisabled||!(i||l)},d.attributes.required||(h.validityState.valueMissing?f.addClass(e.options.requiredClass):f.removeClass(e.options.requiredClass)),d.attributespattern||(h.validityState.patternMismatch?f.addClass(e.options.patternClass):f.removeClass(e.options.patternClass)),h.validityState.valid?(f.removeClass(e.options.invalidClass),g=e.findLabel(f),g.removeClass(e.options.invalidClass),g.attr("aria-invalid","false")):(f.addClass(e.options.invalidClass),g=e.findLabel(f),g.addClass(e.options.invalidClass),g.attr("aria-invalid","true")),h.validityState.valid)},isValueMissing:function(e,f){var g,h,i,j=a(f),k=f.type!==c?f.type:f.tagName.toLowerCase(),l=/^(checkbox|radio|fieldset)$/i.test(k),m=/^submit$/i.test(k);if(m)return!1;if(l){if("checkbox"===k)return!j.is(":checked");for(g="fieldset"===k?j.find("input"):b.getElementsByName(f.name),h=0,i=g.length;h<i;h++)if(a(g[h]).is(":checked"))return!1;return!0}return!(""!==j.val()&&(d.attributes.placeholder||!j.hasClass(e.options.placeholderClass)))},matchPattern:function(b,e){var f,g,h=a(e),i=h.attr("value"),j=h.attr("pattern"),k=h.attr("type");if(!d.attributes.placeholder&&h.attr("placeholder")&&h.hasClass(b.options.placeholderClass)||(i=h.attr("value")),""===i)return!1;if("email"===k){if(h.attr("multiple")===c)return!b.options.emailPatt.test(i);for(i=i.split(b.options.mutipleDelimiter),f=0,g=i.length;f<g;f++)if(!b.options.emailPatt.test(i[f].replace(/[ ]*/g,"")))return!0}else{if("url"===k)return!b.options.urlPatt.test(i);if("text"===k&&j!==c)return usrPatt=new RegExp("^(?:"+j+")$"),!usrPatt.test(i)}return!1},placeholder:function(b,e,f){var g=a(e),h=g.attr("placeholder"),i=/^(focusin|submit)$/i.test(f),j=/^(input|textarea)$/i.test(e.nodeName),k=/^password$/i.test(e.type),l=d.attributes.placeholder;l||!j||k||h===c||(""!==e.value||i?e.value===h&&i&&(e.value="",g.removeClass(b.options.placeholderClass)):(e.value=h,g.addClass(b.options.placeholderClass)))},numberType:function(b,c){var e,f,g,h,i,j,k,l,m=a(c),n=m.attr("type"),o=/^input$/i.test(c.nodeName),p=/^(number|range)$/i.test(n);if(!(!o||!p||"number"==n&&d.types.number||"range"==n&&d.types.range)){for(e=parseInt(m.attr("min")),f=parseInt(m.attr("max")),g=parseInt(m.attr("step")),h=parseInt(m.attr("value")),i=m.prop("attributes"),j=a("<select>"),e=isNaN(e)?-100:e,l=e;l<=f;l+=g)k=a('<option value="'+l+'">'+l+"</option>"),(h==l||h>l&&h<l+g)&&k.attr("selected",""),j.append(k);a.each(i,function(){j.attr(this.name,this.value)}),m.replaceWith(j)}},autofocus:function(b,c){var e=a(c),f=!!e.attr("autofocus"),g=/^(input|textarea|select|fieldset)$/i.test(c.nodeName),h=/^submit$/i.test(c.type),i=d.attributes.autofocus;!i&&g&&!h&&f&&a(function(){b.setFocusOn(c)})},findLabel:function(b){var c,d=a('label[for="'+b.attr("id")+'"]');return d.length<=0&&(c=b.parent(),"label"==c.get(0).tagName.toLowerCase()&&(d=c)),d},setFocusOn:function(b){"fieldset"===b.tagName.toLowerCase()?a(b).find(":first").focus():a(b).focus()},renderErrorMessages:function(b,c){for(var d,e,f=c.elements,g=f.length,h={errors:[]};g--;)d=a(f[g]),e=b.findLabel(d),d.hasClass(b.options.requiredClass)&&(h.errors[g]=e.text().replace("*","")+b.options.requiredMessage),d.hasClass(b.options.patternClass)&&(h.errors[g]=e.text().replace("*","")+b.options.patternMessage);h.errors.length>0&&Joomla.renderMessages(h)}};a.fn.h5f=function(a){return this.each(function(){Object.create(e).init(a,this)})},a.fn.h5f.options={invalidClass:"invalid",requiredClass:"required",requiredMessage:" is required.",placeholderClass:"placeholder",patternClass:"pattern",patternMessage:" doesn't match pattern.",doRenderMessage:!1,formValidationEvent:"onSubmit",emailPatt:/^[a-zA-Z0-9.!#$%&‚Äô*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,urlPatt:/[a-z][\-\.+a-z]*:\/\//i},a(function(){a("form").h5f({doRenderMessage:!0,requiredClass:"musthavevalue"})})}(jQuery,document);