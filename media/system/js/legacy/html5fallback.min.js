!function(t,e,a){"use strict";"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e});var i=function(t,e){for(var a=["required","pattern","placeholder","autofocus","formnovalidate"],i=["email","url","number","range"],s={attributes:{},types:{}};e=a.pop();)s.attributes[e]=!!(e in t);for(;e=i.pop();)t.setAttribute("type",e),s.types[e]=t.type==e;return s}(e.createElement("input")),s={init:function(e,a){this.elem=a,this.$elem=t(a),a.H5Form=this,this.options=t.extend({},t.fn.h5f.options,e),"form"===a.nodeName.toLowerCase()&&this.bindWithForm(this.elem,this.$elem)},bindWithForm:function(t,e){var a=this,s=!!e.attr("novalidate"),r=t.elements,n=r.length;for("onSubmit"===a.options.formValidationEvent&&e.on("submit",function(t){void 0!==this.H5Form.donotValidate&&this.H5Form.donotValidate||s||a.validateForm(a)?e.find(":input").each(function(){a.placeholder(a,this,"submit")}):(t.preventDefault(),this.donotValidate=!1)}),e.on("focusout focusin",function(t){a.placeholder(a,t.target,t.type)}),e.on("focusout change",a.validateField),e.find("fieldset").on("change",function(){a.validateField(this)}),i.attributes.formnovalidate||e.find(":submit[formnovalidate]").on("click",function(){a.donotValidate=!0});n--;)a.polyfill(r[n]),a.autofocus(a,r[n])},polyfill:function(t){if("form"===t.nodeName.toLowerCase())return!0;var e=t.form.H5Form;e.placeholder(e,t),e.numberType(e,t)},validateForm:function(){var t,e,a=this.elem,i=a.elements,s=i.length,r=!0;for(a.isValid=!0,t=0;t<s;t++)(e=i[t]).isRequired=!!e.required,e.isDisabled=!!e.disabled,e.isDisabled||(r=this.validateField(e),a.isValid&&!r&&this.setFocusOn(e),a.isValid=r&&a.isValid);return this.options.doRenderMessage&&this.renderErrorMessages(this,a),a.isValid},validateField:function(e){var a,s,r,n,o=e.target||e,l=!1,u=!1;return void 0===o.form?null:(s=o.form.H5Form,a=!!(r=t(o)).attr("required"),!!r.attr("disabled"),o.isDisabled||(l=!i.attributes.required&&a&&s.isValueMissing(s,o),u=!i.attributes.pattern&&s.matchPattern(s,o)),o.validityState={valueMissing:l,patternMismatch:u,valid:o.isDisabled||!(l||u)},i.attributes.required||(o.validityState.valueMissing?r.addClass(s.options.requiredClass):r.removeClass(s.options.requiredClass)),i.attributespattern||(o.validityState.patternMismatch?r.addClass(s.options.patternClass):r.removeClass(s.options.patternClass)),o.validityState.valid?(r.removeClass(s.options.invalidClass),(n=s.findLabel(r)).removeClass(s.options.invalidClass),n.attr("aria-invalid","false")):(r.addClass(s.options.invalidClass),(n=s.findLabel(r)).addClass(s.options.invalidClass),n.attr("aria-invalid","true")),o.validityState.valid)},isValueMissing:function(a,s){var r,n,o,l=t(s),u=void 0!==s.type?s.type:s.tagName.toLowerCase(),d=/^(checkbox|radio|fieldset)$/i.test(u);if(/^submit$/i.test(u))return!1;if(d){if("checkbox"===u)return!l.is(":checked");for(n=0,o=(r="fieldset"===u?l.find("input"):e.getElementsByName(s.name)).length;n<o;n++)if(t(r[n]).is(":checked"))return!1;return!0}return!(""!==l.val()&&(i.attributes.placeholder||!l.hasClass(a.options.placeholderClass)))},matchPattern:function(e,a){var s,r,n=t(a),o=n.attr("value"),l=n.attr("pattern"),u=n.attr("type");if(!i.attributes.placeholder&&n.attr("placeholder")&&n.hasClass(e.options.placeholderClass)||(o=n.attr("value")),""===o)return!1;if("email"===u){if(void 0===n.attr("multiple"))return!e.options.emailPatt.test(o);for(s=0,r=(o=o.split(e.options.mutipleDelimiter)).length;s<r;s++)if(!e.options.emailPatt.test(o[s].replace(/[ ]*/g,"")))return!0}else{if("url"===u)return!e.options.urlPatt.test(o);if("text"===u&&void 0!==l)return usrPatt=new RegExp("^(?:"+l+")$"),!usrPatt.test(o)}return!1},placeholder:function(e,a,s){var r=t(a),n=r.attr("placeholder"),o=/^(focusin|submit)$/i.test(s),l=/^(input|textarea)$/i.test(a.nodeName),u=/^password$/i.test(a.type);i.attributes.placeholder||!l||u||void 0===n||(""!==a.value||o?a.value===n&&o&&(a.value="",r.removeClass(e.options.placeholderClass)):(a.value=n,r.addClass(e.options.placeholderClass)))},numberType:function(e,a){var s,r,n,o,l,u,d,p,f=t(a),c=f.attr("type"),m=/^input$/i.test(a.nodeName),h=/^(number|range)$/i.test(c);if(!(!m||!h||"number"==c&&i.types.number||"range"==c&&i.types.range)){for(s=parseInt(f.attr("min")),r=parseInt(f.attr("max")),n=parseInt(f.attr("step")),o=parseInt(f.attr("value")),l=f.prop("attributes"),u=t("<select>"),p=s=isNaN(s)?-100:s;p<=r;p+=n)d=t('<option value="'+p+'">'+p+"</option>"),(o==p||o>p&&o<p+n)&&d.attr("selected",""),u.append(d);t.each(l,function(){u.attr(this.name,this.value)}),f.replaceWith(u)}},autofocus:function(e,a){var s=!!t(a).attr("autofocus"),r=/^(input|textarea|select|fieldset)$/i.test(a.nodeName),n=/^submit$/i.test(a.type);!i.attributes.autofocus&&r&&!n&&s&&t(function(){e.setFocusOn(a)})},findLabel:function(e){var a,i=t('label[for="'+e.attr("id")+'"]');return i.length<=0&&"label"==(a=e.parent()).get(0).tagName.toLowerCase()&&(i=a),i},setFocusOn:function(e){"fieldset"===e.tagName.toLowerCase()?t(e).find(":first").focus():t(e).focus()},renderErrorMessages:function(e,a){for(var i,s,r=a.elements,n=r.length,o={errors:[]};n--;)i=t(r[n]),s=e.findLabel(i),i.hasClass(e.options.requiredClass)&&(o.errors[n]=s.text().replace("*","")+e.options.requiredMessage),i.hasClass(e.options.patternClass)&&(o.errors[n]=s.text().replace("*","")+e.options.patternMessage);o.errors.length>0&&Joomla.renderMessages(o)}};t.fn.h5f=function(t){return this.each(function(){Object.create(s).init(t,this)})},t.fn.h5f.options={invalidClass:"invalid",requiredClass:"required",requiredMessage:" is required.",placeholderClass:"placeholder",patternClass:"pattern",patternMessage:" doesn't match pattern.",doRenderMessage:!1,formValidationEvent:"onSubmit",emailPatt:/^[a-zA-Z0-9.!#$%&‚Äô*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,urlPatt:/[a-z][\-\.+a-z]*:\/\//i},t(function(){t("form").h5f({doRenderMessage:!0,requiredClass:"musthavevalue"})})}(jQuery,document);