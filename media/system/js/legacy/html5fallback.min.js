!function(e,t,a){"use strict";"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var i=function(e,t){for(var a=["required","pattern","placeholder","autofocus","formnovalidate"],i=["email","url","number","range"],r={attributes:{},types:{}};t=a.pop();)r.attributes[t]=!!(t in e);for(;t=i.pop();)e.setAttribute("type",t),r.types[t]=e.type==t;return r}(t.createElement("input")),r={init:function(t,a){var i=this;i.elem=a,i.$elem=e(a),a.H5Form=i,i.options=e.extend({},e.fn.h5f.options,t),"form"===a.nodeName.toLowerCase()&&i.bindWithForm(i.elem,i.$elem)},bindWithForm:function(e,t){var a,r=this,s=!!t.attr("novalidate"),n=e.elements,o=n.length;for("onSubmit"===r.options.formValidationEvent&&t.on("submit",function(e){(a=void 0!==this.H5Form.donotValidate&&this.H5Form.donotValidate)||s||r.validateForm(r)?t.find(":input").each(function(){r.placeholder(r,this,"submit")}):(e.preventDefault(),this.donotValidate=!1)}),t.on("focusout focusin",function(e){r.placeholder(r,e.target,e.type)}),t.on("focusout change",r.validateField),t.find("fieldset").on("change",function(){r.validateField(this)}),i.attributes.formnovalidate||t.find(":submit[formnovalidate]").on("click",function(){r.donotValidate=!0});o--;)r.polyfill(n[o]),r.autofocus(r,n[o])},polyfill:function(e){if("form"===e.nodeName.toLowerCase())return!0;var t=e.form.H5Form;t.placeholder(t,e),t.numberType(t,e)},validateForm:function(){var e,t,a=this,i=a.elem,r=i.elements,s=r.length,n=!0;for(i.isValid=!0,e=0;e<s;e++)(t=r[e]).isRequired=!!t.required,t.isDisabled=!!t.disabled,t.isDisabled||(n=a.validateField(t),i.isValid&&!n&&a.setFocusOn(t),i.isValid=n&&i.isValid);return a.options.doRenderMessage&&a.renderErrorMessages(a,i),i.isValid},validateField:function(t){var a,r,s,n=t.target||t,o=!1,l=!1,u=!1;return void 0===n.form?null:(a=n.form.H5Form,r=e(n),l=!!r.attr("required"),!!r.attr("disabled"),n.isDisabled||(o=!i.attributes.required&&l&&a.isValueMissing(a,n),u=!i.attributes.pattern&&a.matchPattern(a,n)),n.validityState={valueMissing:o,patternMismatch:u,valid:n.isDisabled||!(o||u)},i.attributes.required||(n.validityState.valueMissing?r.addClass(a.options.requiredClass):r.removeClass(a.options.requiredClass)),i.attributespattern||(n.validityState.patternMismatch?r.addClass(a.options.patternClass):r.removeClass(a.options.patternClass)),n.validityState.valid?(r.removeClass(a.options.invalidClass),(s=a.findLabel(r)).removeClass(a.options.invalidClass),s.attr("aria-invalid","false")):(r.addClass(a.options.invalidClass),(s=a.findLabel(r)).addClass(a.options.invalidClass),s.attr("aria-invalid","true")),n.validityState.valid)},isValueMissing:function(a,r){var s,n,o,l=e(r),u=void 0!==r.type?r.type:r.tagName.toLowerCase(),d=/^(checkbox|radio|fieldset)$/i.test(u);if(/^submit$/i.test(u))return!1;if(d){if("checkbox"===u)return!l.is(":checked");for(n=0,o=(s="fieldset"===u?l.find("input"):t.getElementsByName(r.name)).length;n<o;n++)if(e(s[n]).is(":checked"))return!1;return!0}return!(""!==l.val()&&(i.attributes.placeholder||!l.hasClass(a.options.placeholderClass)))},matchPattern:function(t,a){var r,s,n=e(a),o=n.attr("value"),l=n.attr("pattern"),u=n.attr("type");if(!i.attributes.placeholder&&n.attr("placeholder")&&n.hasClass(t.options.placeholderClass)||(o=n.attr("value")),""===o)return!1;if("email"===u){if(void 0===n.attr("multiple"))return!t.options.emailPatt.test(o);for(r=0,s=(o=o.split(t.options.mutipleDelimiter)).length;r<s;r++)if(!t.options.emailPatt.test(o[r].replace(/[ ]*/g,"")))return!0}else{if("url"===u)return!t.options.urlPatt.test(o);if("text"===u&&void 0!==l)return usrPatt=new RegExp("^(?:"+l+")$"),!usrPatt.test(o)}return!1},placeholder:function(t,a,r){var s=e(a),n=s.attr("placeholder"),o=/^(focusin|submit)$/i.test(r),l=/^(input|textarea)$/i.test(a.nodeName),u=/^password$/i.test(a.type);i.attributes.placeholder||!l||u||void 0===n||(""!==a.value||o?a.value===n&&o&&(a.value="",s.removeClass(t.options.placeholderClass)):(a.value=n,s.addClass(t.options.placeholderClass)))},numberType:function(t,a){var r,s,n,o,l,u,d,p,f=e(a),c=f.attr("type"),m=/^input$/i.test(a.nodeName),v=/^(number|range)$/i.test(c);if(!(!m||!v||"number"==c&&i.types.number||"range"==c&&i.types.range)){for(r=parseInt(f.attr("min")),s=parseInt(f.attr("max")),n=parseInt(f.attr("step")),o=parseInt(f.attr("value")),l=f.prop("attributes"),u=e("<select>"),p=r=isNaN(r)?-100:r;p<=s;p+=n)d=e('<option value="'+p+'">'+p+"</option>"),(o==p||o>p&&o<p+n)&&d.attr("selected",""),u.append(d);e.each(l,function(){u.attr(this.name,this.value)}),f.replaceWith(u)}},autofocus:function(t,a){var r=!!e(a).attr("autofocus"),s=/^(input|textarea|select|fieldset)$/i.test(a.nodeName),n=/^submit$/i.test(a.type);!i.attributes.autofocus&&s&&!n&&r&&e(function(){t.setFocusOn(a)})},findLabel:function(t){var a,i=e('label[for="'+t.attr("id")+'"]');return i.length<=0&&"label"==(a=t.parent()).get(0).tagName.toLowerCase()&&(i=a),i},setFocusOn:function(t){"fieldset"===t.tagName.toLowerCase()?e(t).find(":first").focus():e(t).focus()},renderErrorMessages:function(t,a){for(var i,r,s=a.elements,n=s.length,o={errors:[]};n--;)i=e(s[n]),r=t.findLabel(i),i.hasClass(t.options.requiredClass)&&(o.errors[n]=r.text().replace("*","")+t.options.requiredMessage),i.hasClass(t.options.patternClass)&&(o.errors[n]=r.text().replace("*","")+t.options.patternMessage);o.errors.length>0&&Joomla.renderMessages(o)}};e.fn.h5f=function(e){return this.each(function(){Object.create(r).init(e,this)})},e.fn.h5f.options={invalidClass:"invalid",requiredClass:"required",requiredMessage:" is required.",placeholderClass:"placeholder",patternClass:"pattern",patternMessage:" doesn't match pattern.",doRenderMessage:!1,formValidationEvent:"onSubmit",emailPatt:/^[a-zA-Z0-9.!#$%&‚Äô*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,urlPatt:/[a-z][\-\.+a-z]*:\/\//i},e(function(){e("form").h5f({doRenderMessage:!0,requiredClass:"musthavevalue"})})}(jQuery,document);