class JoomlaFieldMedia extends HTMLElement{static get observedAttributes(){return["basepath","rootfolder","url","modalcont","modalwidth","modalheight","input","buttonselect","buttonclear","buttonsaveselected","preview","previewwidth","previewheight"]}get basepath(){return this.getAttribute("basepath")}set basepath(t){this.setAttribute("basepath",t)}get rootfolder(){return this.getAttribute("rootfolder")}set rootfolder(t){this.setAttribute("rootfolder",t)}get url(){return this.getAttribute("url")}set url(t){this.setAttribute("url",t)}get modalcont(){return this.getAttribute("modalcont")}set modalcont(t){this.setAttribute("modalcont",t)}get input(){return this.getAttribute("input")}set input(t){this.setAttribute("input",t)}get buttonselect(){return this.getAttribute("buttonselect")}set buttonselect(t){this.setAttribute("buttonselect",t)}get buttonclear(){return this.getAttribute("buttonclear")}set buttonclear(t){this.setAttribute("buttonclear",t)}get buttonsaveselected(){return this.getAttribute("buttonsaveselected")}set buttonsaveselected(t){this.setAttribute("buttonsaveselected",t)}get modalwidth(){return this.getAttribute(parseInt("modalwidth",10))}set modalwidth(t){this.setAttribute("modalwidth",t)}get modalheight(){return this.getAttribute(parseInt("modalheight",10))}set modalheight(t){this.setAttribute("modalheight",t)}get previewwidth(){return this.getAttribute("previewwidth")}set previewwidth(t){this.setAttribute("previewwidth",t)}get previewheight(){return this.getAttribute("previewheight")}set previewheight(t){this.setAttribute("previewheight",t)}get preview(){return this.getAttribute("preview")}set preview(t){this.setAttribute("preview",t)}get previewcontainer(){return this.getAttribute("previewcontainer")}attributeChangedCallback(t,e,i){switch(t){case"basepath":case"rootfolder":case"url":case"modalcont":case"input":case"buttonselect":case"buttonclear":case"buttonsaveselected":case"previewContainer":break;case"modalwidth":case"modalheight":case"previewwidth":case"previewheight":break;case"preview":["true","false","tooltip","static"].indexOf(i)>-1&&e!==i&&(this.preview=i)}}connectedCallback(){const t=this,e=this.querySelector(this.buttonselect),i=this.querySelector(this.buttonclear);e.addEventListener("click",()=>{t.show(t)}),i&&i.addEventListener("click",()=>{t.clearValue()}),this.updatePreview()}disconnectedCallback(){this.querySelector(this.buttonselect).removeEventListener("click",self)}show(t){window.jQuery(this.querySelector('[role="dialog"]')).modal("show"),window.jQuery(this.querySelector(this.buttonsaveselected)).on("click",e=>(e.preventDefault(),e.stopPropagation(),t.selectedPath?t.setValue(t.rootfolder+t.selectedPath):t.setValue(""),t.modalClose(t),!1)),window.document.addEventListener("onMediaFileSelected",e=>{e.item.path.match(/.jpg|.jpeg|.gif|.png/)?t.selectedPath=e.item.path:t.selectedPath=""})}modalClose(t){window.jQuery(t.querySelector('[role="dialog"]')).modal("hide")}setValue(t){window.jQuery(this.querySelector(this.input)).val(t).trigger("change"),this.updatePreview()}clearValue(){this.setValue("")}updatePreview(){if(-1!==["true","tooltip","static"].indexOf(this.preview)&&"false"!==this.preview&&this.preview){const t=window.jQuery(this.querySelector(this.previewcontainer)),e=window.jQuery(this.querySelector(this.input)),i=e.val();if(t.popover("dispose"),e.tooltip("dispose"),i){const r=new Image(this.previewwidth,this.previewheight);r.src=this.basepath+i,t.popover({content:r,html:!0}),e.tooltip({placement:"top",title:i})}else t.popover({content:Joomla.JText._("JLIB_FORM_MEDIA_PREVIEW_EMPTY"),html:!0})}}}customElements.define("joomla-field-media",JoomlaFieldMedia);