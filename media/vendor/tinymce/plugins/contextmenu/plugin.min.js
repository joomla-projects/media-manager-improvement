!function(){"use strict";var n=function(t){var e=t,o=function(){return e};return{get:o,set:function(n){e=n},clone:function(){return n(o())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(n){return{isContextMenuVisible:function(){return n.get()}}},o=function(n){return n.settings.contextmenu_never_use_native},r=function(n){return n.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")},i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),u=function(n){return i.DOM.select(n.settings.ui_container)[0]},c=function(n,t){return{x:n,y:t}},l=function(n,t,e){return c(n.x+t,n.y+e)},s=function(n,t){if(n&&"static"!==i.DOM.getStyle(n,"position",!0)){var e=i.DOM.getPos(n),o=e.x-n.scrollLeft,r=e.y-n.scrollTop;return l(t,-o,-r)}return l(t,0,0)},f=function(n,t){if(n.inline)return s(u(n),function(n){return c(n.pageX,n.pageY)}(t));var e,o,r,f=(e=n.getContentAreaContainer(),o=function(n){return c(n.clientX,n.clientY)}(t),r=i.DOM.getPos(e),l(o,r.x,r.y));return s(u(n),f)},a=tinymce.util.Tools.resolve("tinymce.ui.Factory"),m=tinymce.util.Tools.resolve("tinymce.util.Tools"),g=function(n,t,e,o){null===o.get()?o.set(function(n,t){var e,o,i=[];o=r(n),m.each(o.split(/[ ,]/),function(t){var e=n.menuItems[t];"|"===t&&(e={text:t}),e&&(e.shortcut="",i.push(e))});for(var c=0;c<i.length;c++)"|"===i[c].text&&(0!==c&&c!==i.length-1||i.splice(c,1));return(e=a.create("menu",{items:i,context:"contextmenu",classes:"contextmenu"})).uiContainer=u(n),e.renderTo(u(n)),e.on("hide",function(n){n.control===this&&t.set(!1)}),n.on("remove",function(){e.remove(),e=null}),e}(n,e)):o.get().show(),o.get().moveTo(t.x,t.y),e.set(!0)},v=function(n,t,e){n.on("contextmenu",function(r){(function(n,t){return t.ctrlKey&&!o(n)})(n,r)||(r.preventDefault(),g(n,f(n,r),t,e))})};t.add("contextmenu",function(t){var o=n(null),r=n(!1);return v(t,r,o),e(r)})}();