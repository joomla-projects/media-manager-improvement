!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function n(e,n){for(var t=0;t<e.length;t++)n(e[t],t)}function t(e,n){for(var t=0;t<e.length;t++)if(n(e[t],t))return!0;return!1}e.defineMode("dylan",function(e){function i(e,n,t){return n.tokenize=t,t(e,n)}function r(e,n){var r=e.peek();if("'"==r||'"'==r)return e.next(),i(e,n,a(r,"string"));if("/"==r){if(e.next(),e.eat("*"))return i(e,n,o);if(e.eat("/"))return e.skipToEnd(),"comment";e.backUp(1)}else if(/[+\-\d\.]/.test(r)){if(e.match(/^[+-]?[0-9]*\.[0-9]*([esdx][+-]?[0-9]+)?/i)||e.match(/^[+-]?[0-9]+([esdx][+-]?[0-9]+)/i)||e.match(/^[+-]?\d+/))return"number"}else{if("#"==r)return e.next(),'"'==(r=e.peek())?(e.next(),i(e,n,a('"',"string"))):"b"==r?(e.next(),e.eatWhile(/[01]/),"number"):"x"==r?(e.next(),e.eatWhile(/[\da-f]/i),"number"):"o"==r?(e.next(),e.eatWhile(/[0-7]/),"number"):"#"==r?(e.next(),"punctuation"):"["==r||"("==r?(e.next(),"bracket"):e.match(/f|t|all-keys|include|key|next|rest/i)?"atom":(e.eatWhile(/[-a-zA-Z]/),"error");if("~"==r)return e.next(),"="==(r=e.peek())?(e.next(),"="==(r=e.peek())?(e.next(),"operator"):"operator"):"operator";if(":"==r){if(e.next(),"="==(r=e.peek()))return e.next(),"operator";if(":"==r)return e.next(),"punctuation"}else{if(-1!="[](){}".indexOf(r))return e.next(),"bracket";if(-1!=".,".indexOf(r))return e.next(),"punctuation";if(e.match("end"))return"keyword"}}for(var f in u)if(u.hasOwnProperty(f)){var l=u[f];if(l instanceof Array&&t(l,function(n){return e.match(n)})||e.match(l))return s[f]}return/[+\-*\/^=<>&|]/.test(r)?(e.next(),"operator"):e.match("define")?"def":(e.eatWhile(/[\w\-]/),p.hasOwnProperty(e.current())?b[e.current()]:e.current().match(c)?"variable":(e.next(),"variable-2"))}function o(e,n){for(var t,i=!1,o=!1,a=0;t=e.next();){if("/"==t&&i){if(!(a>0)){n.tokenize=r;break}a--}else"*"==t&&o&&a++;i="*"==t,o="/"==t}return"comment"}function a(e,n){return function(t,i){for(var o,a=!1,f=!1;null!=(o=t.next());){if(o==e&&!a){f=!0;break}a=!a&&"\\"==o}return!f&&a||(i.tokenize=r),n}}var f={unnamedDefinition:["interface"],namedDefinition:["module","library","macro","C-struct","C-union","C-function","C-callable-wrapper"],typeParameterizedDefinition:["class","C-subtype","C-mapped-subtype"],otherParameterizedDefinition:["method","function","C-variable","C-address"],constantSimpleDefinition:["constant"],variableSimpleDefinition:["variable"],otherSimpleDefinition:["generic","domain","C-pointer-type","table"],statement:["if","block","begin","method","case","for","select","when","unless","until","while","iterate","profiling","dynamic-bind"],separator:["finally","exception","cleanup","else","elseif","afterwards"],other:["above","below","by","from","handler","in","instance","let","local","otherwise","slot","subclass","then","to","keyed-by","virtual"],signalingCalls:["signal","error","cerror","break","check-type","abort"]};f.otherDefinition=f.unnamedDefinition.concat(f.namedDefinition).concat(f.otherParameterizedDefinition),f.definition=f.typeParameterizedDefinition.concat(f.otherDefinition),f.parameterizedDefinition=f.typeParameterizedDefinition.concat(f.otherParameterizedDefinition),f.simpleDefinition=f.constantSimpleDefinition.concat(f.variableSimpleDefinition).concat(f.otherSimpleDefinition),f.keyword=f.statement.concat(f.separator).concat(f.other);var l="[-_a-zA-Z?!*@<>$%]+",c=new RegExp("^"+l),u={symbolKeyword:l+":",symbolClass:"<"+l+">",symbolGlobal:"\\*"+l+"\\*",symbolConstant:"\\$"+l},s={symbolKeyword:"atom",symbolClass:"tag",symbolGlobal:"variable-2",symbolConstant:"variable-3"};for(var m in u)u.hasOwnProperty(m)&&(u[m]=new RegExp("^"+u[m]));u.keyword=[/^with(?:out)?-[-_a-zA-Z?!*@<>$%]+/];var d={};d.keyword="keyword",d.definition="def",d.simpleDefinition="def",d.signalingCalls="builtin";var p={},b={};return n(["keyword","definition","simpleDefinition","signalingCalls"],function(e){n(f[e],function(n){p[n]=e,b[n]=d[e]})}),{startState:function(){return{tokenize:r,currentIndent:0}},token:function(e,n){if(e.eatSpace())return null;return n.tokenize(e,n)},blockCommentStart:"/*",blockCommentEnd:"*/"}}),e.defineMIME("text/x-dylan","dylan")});