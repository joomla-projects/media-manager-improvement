!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,r){function n(e,t,r){return be=e,xe=r,t}function a(e,t){var r=e.next();if('"'==r||"'"==r)return t.tokenize=function(e){return function(t,r){var i,o=!1;if(ge&&"@"==t.peek()&&t.match(ze))return r.tokenize=a,n("jsonld-keyword","meta");for(;null!=(i=t.next())&&(i!=e||o);)o=!o&&"\\"==i;return o||(r.tokenize=a),n("string","string")}}(r),t.tokenize(e,t);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return n("number","number");if("."==r&&e.match(".."))return n("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return n(r);if("="==r&&e.eat(">"))return n("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),n("number","number");if("0"==r&&e.eat(/o/i))return e.eatWhile(/[0-7]/i),n("number","number");if("0"==r&&e.eat(/b/i))return e.eatWhile(/[01]/i),n("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),n("number","number");if("/"==r)return e.eat("*")?(t.tokenize=i,i(e,t)):e.eat("/")?(e.skipToEnd(),n("comment","comment")):ke(e,t,1)?(function(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),n("regexp","string-2")):(e.eat("="),n("operator","operator",e.current()));if("`"==r)return t.tokenize=o,o(e,t);if("#"==r)return e.skipToEnd(),n("error","error");if(Ee.test(r))return">"==r&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=r&&"="!=r||e.eat("="):/[<>*+\-]/.test(r)&&(e.eat(r),">"==r&&e.eat(r))),n("operator","operator",e.current());if(Ve.test(r)){e.eatWhile(Ve);var c=e.current();if("."!=t.lastType){if(Ae.propertyIsEnumerable(c)){var u=Ae[c];return n(u.type,u.style,c)}if("async"==c&&e.match(/^\s*[\(\w]/,!1))return n("async","keyword",c)}return n("variable","variable",c)}}function i(e,t){for(var r,i=!1;r=e.next();){if("/"==r&&i){t.tokenize=a;break}i="*"==r}return n("comment","comment")}function o(e,t){for(var r,i=!1;null!=(r=e.next());){if(!i&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=a;break}i=!i&&"\\"==r}return n("quasi","string-2",e.current())}function c(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){if(Me){var n=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,r));n&&(r=n.index)}for(var a=0,i=!1,o=r-1;o>=0;--o){var c=e.string.charAt(o),u=Ie.indexOf(c);if(u>=0&&u<3){if(!a){++o;break}if(0==--a){"("==c&&(i=!0);break}}else if(u>=3&&u<6)++a;else if(Ve.test(c))i=!0;else{if(/["'\/]/.test(c))return;if(i&&!a){++o;break}}}i&&!a&&(t.fatArrowAt=o)}}function u(e,t,r,n,a,i){this.indented=e,this.column=t,this.type=r,this.prev=a,this.info=i,null!=n&&(this.align=n)}function s(e,t){for(n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==t)return!0}function f(){for(var e=arguments.length-1;e>=0;e--)$e.cc.push(arguments[e])}function l(){return f.apply(null,arguments),!0}function d(e){function t(t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}var n=$e.state;if($e.marked="def",n.context){if(t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;r.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}function p(){$e.state.context={prev:$e.state.context,vars:$e.state.localVars},$e.state.localVars=Ce}function m(){$e.state.localVars=$e.state.context.vars,$e.state.context=$e.state.context.prev}function v(e,t){var r=function(){var r=$e.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var a=r.lexical;a&&")"==a.type&&a.align;a=a.prev)n=a.indented;r.lexical=new u(n,$e.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function y(){var e=$e.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function k(e){function t(r){return r==e?l():";"==e?f():l(t)}return t}function b(e,t){return"var"==e?l(v("vardef",t.length),J,k(";"),y):"keyword a"==e?l(v("form"),h,b,y):"keyword b"==e?l(v("form"),b,y):"keyword d"==e?$e.stream.match(/^\s*$/,!1)?l():l(v("stat"),j,k(";"),y):"debugger"==e?l(k(";")):"{"==e?l(v("}"),W,y):";"==e?l():"if"==e?("else"==$e.state.lexical.info&&$e.state.cc[$e.state.cc.length-1]==y&&$e.state.cc.pop()(),l(v("form"),h,b,y,X)):"function"==e?l(re):"for"==e?l(v("form"),Y,b,y):"variable"==e?Me&&"type"==t?($e.marked="keyword",l(U,k("operator"),U,k(";"))):Me&&"declare"==t?($e.marked="keyword",l(b)):l(v("stat"),T):"switch"==e?l(v("form"),h,k("{"),v("}","switch"),W,y,y):"case"==e?l(x,k(":")):"default"==e?l(k(":")):"catch"==e?l(v("form"),p,k("("),ne,k(")"),b,y,m):"class"==e?l(v("form"),ie,y):"export"==e?l(v("stat"),se,y):"import"==e?l(v("stat"),le,y):"module"==e?l(v("form"),K,k("{"),v("}"),W,y,y):"async"==e?l(b):"@"==t?l(x,b):f(v("stat"),x,k(";"),y)}function x(e){return g(e,!1)}function w(e){return g(e,!0)}function h(e){return"("!=e?f():l(v(")"),x,k(")"),y)}function g(e,t){if($e.state.fatArrowAt==$e.stream.start){var r=t?I:z;if("("==e)return l(p,v(")"),P(ne,")"),y,k("=>"),r,m);if("variable"==e)return f(p,K,k("=>"),r,m)}var n=t?V:M;return Te.hasOwnProperty(e)?l(n):"function"==e?l(re,n):"class"==e?l(v("form"),ae,y):"keyword c"==e||"async"==e?l(t?w:x):"("==e?l(v(")"),j,k(")"),y,n):"operator"==e||"spread"==e?l(t?w:x):"["==e?l(v("]"),ye,y,n):"{"==e?S(C,"}",null,n):"quasi"==e?f(A,n):"new"==e?l(function(e){return function(t){return"."==t?l(e?function(e,t){if("target"==t)return $e.marked="keyword",l(V)}:function(e,t){if("target"==t)return $e.marked="keyword",l(M)}):"variable"==t&&Me?l(G,e?V:M):f(e?w:x)}}(t)):l()}function j(e){return e.match(/[;\}\)\],]/)?f():f(x)}function M(e,t){return","==e?l(x):V(e,t,!1)}function V(e,t,r){var n=0==r?M:V,a=0==r?x:w;return"=>"==e?l(p,r?I:z,m):"operator"==e?/\+\+|--/.test(t)||Me&&"!"==t?l(n):"?"==t?l(x,k(":"),a):l(a):"quasi"==e?f(A,n):";"!=e?"("==e?S(w,")","call",n):"."==e?l($,n):"["==e?l(v("]"),j,k("]"),y,n):Me&&"as"==t?($e.marked="keyword",l(U,n)):"regexp"==e?($e.state.lastType=$e.marked="operator",$e.stream.backUp($e.stream.pos-$e.stream.start-1),l(a)):void 0:void 0}function A(e,t){return"quasi"!=e?f():"${"!=t.slice(t.length-2)?l(A):l(x,E)}function E(e){if("}"==e)return $e.marked="string-2",$e.state.tokenize=o,l(A)}function z(e){return c($e.stream,$e.state),f("{"==e?b:x)}function I(e){return c($e.stream,$e.state),f("{"==e?b:w)}function T(e){return":"==e?l(y,b):f(M,k(";"),y)}function $(e){if("variable"==e)return $e.marked="property",l()}function C(e,t){if("async"==e)return $e.marked="property",l(C);if("variable"==e||"keyword"==$e.style){if($e.marked="property","get"==t||"set"==t)return l(q);var r;return Me&&$e.state.fatArrowAt==$e.stream.start&&(r=$e.stream.match(/^\s*:\s*/,!1))&&($e.state.fatArrowAt=$e.stream.pos+r[0].length),l(O)}return"number"==e||"string"==e?($e.marked=ge?"property":$e.style+" property",l(O)):"jsonld-keyword"==e?l(O):"modifier"==e?l(C):"["==e?l(x,k("]"),O):"spread"==e?l(w,O):"*"==t?($e.marked="keyword",l(C)):":"==e?f(O):void 0}function q(e){return"variable"!=e?f(O):($e.marked="property",l(re))}function O(e){return":"==e?l(w):"("==e?f(re):void 0}function P(e,t,r){function n(a,i){if(r?r.indexOf(a)>-1:","==a){var o=$e.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),l(function(r,n){return r==t||n==t?f():f(e)},n)}return a==t||i==t?l():l(k(t))}return function(r,a){return r==t||a==t?l():f(e,n)}}function S(e,t,r){for(var n=3;n<arguments.length;n++)$e.cc.push(arguments[n]);return l(v(t,r),P(e,t),y)}function W(e){return"}"==e?l():f(b,W)}function N(e,t){if(Me){if(":"==e)return l(U);if("?"==t)return l(N)}}function U(e,t){return"variable"==e||"void"==t?"keyof"==t?($e.marked="keyword",l(U)):($e.marked="type",l(F)):"string"==e||"number"==e||"atom"==e?l(F):"["==e?l(v("]"),P(U,"]",","),y,F):"{"==e?l(v("}"),P(H,"}",",;"),y,F):"("==e?l(P(D,")"),B):void 0}function B(e){if("=>"==e)return l(U)}function H(e,t){return"variable"==e||"keyword"==$e.style?($e.marked="property",l(H)):"?"==t?l(H):":"==e?l(U):"["==e?l(x,N,k("]"),H):void 0}function D(e){return"variable"==e?l(D):":"==e?l(U):void 0}function F(e,t){return"<"==t?l(v(">"),P(U,">"),y,F):"|"==t||"."==e?l(U):"["==e?l(k("]"),F):"extends"==t?l(U):void 0}function G(e,t){if("<"==t)return l(v(">"),P(U,">"),y,F)}function J(){return f(K,N,Q,R)}function K(e,t){return"modifier"==e?l(K):"variable"==e?(d(t),l()):"spread"==e?l(K):"["==e?S(K,"]"):"{"==e?S(L,"}"):void 0}function L(e,t){return"variable"!=e||$e.stream.match(/^\s*:/,!1)?("variable"==e&&($e.marked="property"),"spread"==e?l(K):"}"==e?f():l(k(":"),K,Q)):(d(t),l(Q))}function Q(e,t){if("="==t)return l(w)}function R(e){if(","==e)return l(J)}function X(e,t){if("keyword b"==e&&"else"==t)return l(v("form","else"),b,y)}function Y(e){if("("==e)return l(v(")"),Z,k(")"),y)}function Z(e){return"var"==e?l(J,k(";"),ee):";"==e?l(ee):"variable"==e?l(_):f(x,k(";"),ee)}function _(e,t){return"in"==t||"of"==t?($e.marked="keyword",l(x)):l(M,ee)}function ee(e,t){return";"==e?l(te):"in"==t||"of"==t?($e.marked="keyword",l(x)):f(x,k(";"),te)}function te(e){")"!=e&&l(x)}function re(e,t){return"*"==t?($e.marked="keyword",l(re)):"variable"==e?(d(t),l(re)):"("==e?l(p,v(")"),P(ne,")"),y,N,b,m):Me&&"<"==t?l(v(">"),P(U,">"),y,re):void 0}function ne(e,t){return"@"==t&&l(x,ne),"spread"==e||"modifier"==e?l(ne):f(K,N,Q)}function ae(e,t){return"variable"==e?ie(e,t):oe(e,t)}function ie(e,t){if("variable"==e)return d(t),l(oe)}function oe(e,t){return"<"==t?l(v(">"),P(U,">"),y,oe):"extends"==t||"implements"==t||Me&&","==e?l(Me?U:x,oe):"{"==e?l(v("}"),ce,y):void 0}function ce(e,t){return"modifier"==e||"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t)&&$e.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?($e.marked="keyword",l(ce)):"variable"==e||"keyword"==$e.style?($e.marked="property",l(Me?ue:re,ce)):"["==e?l(x,k("]"),Me?ue:re,ce):"*"==t?($e.marked="keyword",l(ce)):";"==e?l(ce):"}"==e?l():"@"==t?l(x,ce):void 0}function ue(e,t){return"?"==t?l(ue):":"==e?l(U,Q):"="==t?l(w):f(re)}function se(e,t){return"*"==t?($e.marked="keyword",l(ve,k(";"))):"default"==t?($e.marked="keyword",l(x,k(";"))):"{"==e?l(P(fe,"}"),ve,k(";")):f(b)}function fe(e,t){return"as"==t?($e.marked="keyword",l(k("variable"))):"variable"==e?f(w,fe):void 0}function le(e){return"string"==e?l():f(de,pe,ve)}function de(e,t){return"{"==e?S(de,"}"):("variable"==e&&d(t),"*"==t&&($e.marked="keyword"),l(me))}function pe(e){if(","==e)return l(de,pe)}function me(e,t){if("as"==t)return $e.marked="keyword",l(de)}function ve(e,t){if("from"==t)return $e.marked="keyword",l(x)}function ye(e){return"]"==e?l():f(P(w,"]"))}function ke(e,t,r){return t.tokenize==a&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(r||0)))}var be,xe,we=t.indentUnit,he=r.statementIndent,ge=r.jsonld,je=r.json||ge,Me=r.typescript,Ve=r.wordCharacters||/[\w$\xa1-\uffff]/,Ae=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),a=e("keyword d"),i=e("operator"),o={type:"atom",style:"atom"},c={if:e("if"),while:t,with:t,else:r,do:r,try:r,finally:r,return:a,break:a,continue:a,new:e("new"),delete:n,void:n,throw:n,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:i,typeof:i,instanceof:i,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:e("this"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n,await:n};if(Me){var u={type:"variable",style:"type"},s={interface:e("class"),implements:n,namespace:n,module:e("module"),enum:e("module"),public:e("modifier"),private:e("modifier"),protected:e("modifier"),abstract:e("modifier"),readonly:e("modifier"),string:u,number:u,boolean:u,any:u};for(var f in s)c[f]=s[f]}return c}(),Ee=/[+\-*&%=<>!?|~^@]/,ze=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Ie="([{}])",Te={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},$e={state:null,column:null,marked:null,cc:null},Ce={name:"this",next:{name:"arguments"}};return y.lex=!0,{startState:function(e){var t={tokenize:a,lastType:"sof",cc:[],lexical:new u((e||0)-we,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:e||0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),c(e,t)),t.tokenize!=i&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==be?r:(t.lastType="operator"!=be||"++"!=xe&&"--"!=xe?be:"incdec",function(e,t,r,n,a){var i=e.cc;for($e.state=e,$e.stream=a,$e.marked=null,$e.cc=i,$e.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((i.length?i.pop():je?x:b)(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return $e.marked?$e.marked:"variable"==r&&s(e,n)?"variable-2":t}}(t,r,be,xe,e))},indent:function(t,n){if(t.tokenize==i)return e.Pass;if(t.tokenize!=a)return 0;var o,c=n&&n.charAt(0),u=t.lexical;if(!/^\s*else\b/.test(n))for(var s=t.cc.length-1;s>=0;--s){var f=t.cc[s];if(f==y)u=u.prev;else if(f!=X)break}for(;("stat"==u.type||"form"==u.type)&&("}"==c||(o=t.cc[t.cc.length-1])&&(o==M||o==V)&&!/^[,\.=+\-*:?[\(]/.test(n));)u=u.prev;he&&")"==u.type&&"stat"==u.prev.type&&(u=u.prev);var l=u.type,d=c==l;return"vardef"==l?u.indented+("operator"==t.lastType||","==t.lastType?u.info+1:0):"form"==l&&"{"==c?u.indented:"form"==l?u.indented+we:"stat"==l?u.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||Ee.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,n)?he||we:0):"switch"!=u.info||d||0==r.doubleIndentSwitch?u.align?u.column+(d?0:1):u.indented+(d?0:we):u.indented+(/^(?:case|default)\b/.test(n)?we:2*we)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:je?null:"/*",blockCommentEnd:je?null:"*/",blockCommentContinue:je?null:" * ",lineComment:je?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:je?"json":"javascript",jsonldMode:ge,jsonMode:je,expressionAllowed:ke,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=x&&t!=w||e.cc.pop()}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})});