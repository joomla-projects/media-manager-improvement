!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("julia",function(a,b){function c(a,b){return void 0===b&&(b="\\b"),new RegExp("^(("+a.join(")|(")+"))"+b)}function d(a){return e(a,"[")}function e(a,b){var c=f(a),d=f(a,1);return void 0===b&&(b="("),c===b||d===b&&"for"===c}function f(a,b){return void 0===b&&(b=0),a.scopes.length<=b?null:a.scopes[a.scopes.length-(b+1)]}function g(a,b){if(a.match(/^#=/,!1))return b.tokenize=j,b.tokenize(a,b);var c=b.leavingExpr;if(a.sol()&&(c=!1),b.leavingExpr=!1,c&&a.match(/^'+/))return"operator";if(a.match(/\.{4,}/))return"error";if(a.match(/\.{1,3}/))return"operator";if(a.eatSpace())return null;var g=a.peek();if("#"===g)return a.skipToEnd(),"comment";"["===g&&b.scopes.push("["),"("===g&&b.scopes.push("(");var p=f(b);if(d(b)&&"]"===g&&("for"===p&&b.scopes.pop(),b.scopes.pop(),b.leavingExpr=!0),e(b)&&")"===g&&("for"===p&&b.scopes.pop(),b.scopes.pop(),b.leavingExpr=!0),d(b)){if("end"==b.lastToken&&a.match(/^:/))return"operator";if(a.match(/^end/))return"number"}var x;if((x=a.match(q,!1))&&b.scopes.push(x[0]),a.match(r,!1)&&b.scopes.pop(),a.match(/^::(?![:\$])/))return b.tokenize=i,b.tokenize(a,b);if(!c&&a.match(v)||a.match(/:([<>]:|<<=?|>>>?=?|->|\/\/|\.{2,3}|[\.\\%*+\-<>!\/^|&]=?|[~\?\$])/))return"builtin";if(a.match(m))return"operator";if(a.match(/^\.?\d/,!1)){var y=RegExp(/^im\b/),z=!1;if(a.match(/^\d*\.(?!\.)\d*([Eef][\+\-]?\d+)?/i)&&(z=!0),a.match(/^\d+\.(?!\.)\d*/)&&(z=!0),a.match(/^\.\d+/)&&(z=!0),a.match(/^0x\.[0-9a-f]+p[\+\-]?\d+/i)&&(z=!0),a.match(/^0x[0-9a-f]+/i)&&(z=!0),a.match(/^0b[01]+/i)&&(z=!0),a.match(/^0o[0-7]+/i)&&(z=!0),a.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(z=!0),a.match(/^0(?![\dx])/i)&&(z=!0),z)return a.match(y),b.leavingExpr=!0,"number"}if(a.match(/^'/))return b.tokenize=k,b.tokenize(a,b);if(a.match(w))return b.tokenize=l(a.current()),b.tokenize(a,b);if(a.match(u))return"meta";if(a.match(n))return null;if(a.match(s))return"keyword";if(a.match(t))return"builtin";var A=b.isDefinition||"function"==b.lastToken||"macro"==b.lastToken||"type"==b.lastToken||"struct"==b.lastToken||"immutable"==b.lastToken;return a.match(o)?A?"."===a.peek()?(b.isDefinition=!0,"variable"):(b.isDefinition=!1,"def"):a.match(/^({[^}]*})*\(/,!1)?(b.tokenize=h,b.tokenize(a,b)):(b.leavingExpr=!0,"variable"):(a.next(),"error")}function h(a,b){var c=a.match(/^(\(\s*)/);if(c&&(b.firstParenPos<0&&(b.firstParenPos=b.scopes.length),b.scopes.push("("),b.charsAdvanced+=c[1].length),"("==f(b)&&a.match(/^\)/)&&(b.scopes.pop(),b.charsAdvanced+=1,b.scopes.length<=b.firstParenPos)){var d=a.match(/^(\s*where\s+[^\s=]+)*\s*?=(?!=)/,!1);return a.backUp(b.charsAdvanced),b.firstParenPos=-1,b.charsAdvanced=0,b.tokenize=g,d?"def":"builtin"}if(a.match(/^$/g,!1)){for(a.backUp(b.charsAdvanced);b.scopes.length>b.firstParenPos;)b.scopes.pop();return b.firstParenPos=-1,b.charsAdvanced=0,b.tokenize=g,"builtin"}return b.charsAdvanced+=a.match(/^([^()]*)/)[1].length,b.tokenize(a,b)}function i(a,b){return a.match(/.*?(?=,|;|{|}|\(|\)|=|$|\s)/),a.match(/^{/)?b.nestedLevels++:a.match(/^}/)&&b.nestedLevels--,b.nestedLevels>0?a.match(/.*?(?={|})/)||a.next():0==b.nestedLevels&&(b.tokenize=g),"builtin"}function j(a,b){return a.match(/^#=/)&&b.nestedLevels++,a.match(/.*?(?=(#=|=#))/)||a.skipToEnd(),a.match(/^=#/)&&0==--b.nestedLevels&&(b.tokenize=g),"comment"}function k(a,b){var c,d=!1;if(a.match(p))d=!0;else if(c=a.match(/\\u([a-f0-9]{1,4})(?=')/i)){var e=parseInt(c[1],16);(e<=55295||e>=57344)&&(d=!0,a.next())}else if(c=a.match(/\\U([A-Fa-f0-9]{5,8})(?=')/)){var e=parseInt(c[1],16);e<=1114111&&(d=!0,a.next())}return d?(b.leavingExpr=!0,b.tokenize=g,"string"):(a.match(/^[^']+(?=')/)||a.skipToEnd(),a.match(/^'/)&&(b.tokenize=g),"error")}function l(a){function b(b,c){if(b.eat("\\"))b.next();else{if(b.match(a))return c.tokenize=g,c.leavingExpr=!0,"string";b.eat(/[`"]/)}return b.eatWhile(/[^\\`"]/),"string"}return'"""'===a.substr(-3)?a='"""':'"'===a.substr(-1)&&(a='"'),b}var m=b.operators||c(["[<>]:","[<>=]=","<<=?",">>>?=?","=>","->","\\/\\/","[\\\\%*+\\-<>!=\\/^|&\\u00F7\\u22BB]=?","\\?","\\$","~",":","\\u00D7","\\u2208","\\u2209","\\u220B","\\u220C","\\u2218","\\u221A","\\u221B","\\u2229","\\u222A","\\u2260","\\u2264","\\u2265","\\u2286","\\u2288","\\u228A","\\u22C5","\\b(in|isa)\\b(?!.?\\()"],""),n=b.delimiters||/^[;,()[\]{}]/,o=b.identifiers||/^[_A-Za-z\u00A1-\u2217\u2219-\uFFFF][\w\u00A1-\u2217\u2219-\uFFFF]*!*/,p=c(["\\\\[0-7]{1,3}","\\\\x[A-Fa-f0-9]{1,2}","\\\\[abefnrtv0%?'\"\\\\]","([^\\u0027\\u005C\\uD800-\\uDFFF]|[\\uD800-\\uDFFF][\\uDC00-\\uDFFF])"],"'"),q=c(["begin","function","type","struct","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"]),r=c(["end","else","elseif","catch","finally"]),s=c(["if","else","elseif","while","for","begin","let","end","do","try","catch","finally","return","break","continue","global","local","const","export","import","importall","using","function","where","macro","module","baremodule","struct","type","mutable","immutable","quote","typealias","abstract","primitive","bitstype"]),t=c(["true","false","nothing","NaN","Inf"]),u=/^@[_A-Za-z][\w]*/,v=/^:[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/,w=/^(`|([_A-Za-z\u00A1-\uFFFF]*"("")?))/;return{startState:function(){return{tokenize:g,scopes:[],lastToken:null,leavingExpr:!1,isDefinition:!1,nestedLevels:0,charsAdvanced:0,firstParenPos:-1}},token:function(a,b){var c=b.tokenize(a,b),d=a.current();return d&&c&&(b.lastToken=d),c},indent:function(b,c){var d=0;return"]"!==c&&")"!==c&&"end"!==c&&"else"!==c&&"catch"!==c&&"elseif"!==c&&"finally"!==c||(d=-1),(b.scopes.length+d)*a.indentUnit},electricInput:/\b(end|else|catch|finally)\b/,blockCommentStart:"#=",blockCommentEnd:"=#",lineComment:"#",fold:"indent"}}),a.defineMIME("text/x-julia","julia")});