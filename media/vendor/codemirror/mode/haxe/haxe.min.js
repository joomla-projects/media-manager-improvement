!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("haxe",function(e,t){var r=e.indentUnit;function n(e){return{type:e,style:"keyword"}}var a=n("keyword a"),i=n("keyword b"),o=n("keyword c"),l=n("operator"),u={type:"atom",style:"atom"},c={type:"attribute",style:"attribute"},f=n("typedef"),s={if:a,while:a,else:i,do:i,try:i,return:o,break:o,continue:o,new:o,throw:o,var:n("var"),inline:c,static:c,using:n("import"),public:c,private:c,cast:n("cast"),import:n("import"),macro:n("macro"),function:n("function"),catch:n("catch"),untyped:n("untyped"),callback:n("cb"),for:n("for"),switch:n("switch"),case:n("case"),default:n("default"),in:l,never:n("property_access"),trace:n("trace"),class:f,abstract:f,enum:f,interface:f,typedef:f,extends:f,implements:f,dynamic:f,true:u,false:u,null:u},d=/[+\-*&%=<>!?|]/;function p(e,t,r){return t.tokenize=r,r(e,t)}function m(e,t){for(var r,n=!1;null!=(r=e.next());){if(r==t&&!n)return!0;n=!n&&"\\"==r}}var v;function b(e,t,r){return f=e,v=r,t}function y(e,t){var r=e.next();if('"'==r||"'"==r)return p(e,t,(i=r,function(e,t){return m(e,i)&&(t.tokenize=y),b("string","string")}));if(/[\[\]{}\(\),;\:\.]/.test(r))return b(r);if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),b("number","number");if(/\d/.test(r)||"-"==r&&e.eat(/\d/))return e.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),b("number","number");if(t.reAllowed&&"~"==r&&e.eat(/\//))return m(e,"/"),e.eatWhile(/[gimsu]/),b("regexp","string-2");if("/"==r)return e.eat("*")?p(e,t,x):e.eat("/")?(e.skipToEnd(),b("comment","comment")):(e.eatWhile(d),b("operator",null,e.current()));if("#"==r)return e.skipToEnd(),b("conditional","meta");if("@"==r)return e.eat(/:/),e.eatWhile(/[\w_]/),b("metadata","meta");if(d.test(r))return e.eatWhile(d),b("operator",null,e.current());if(/[A-Z]/.test(r))return e.eatWhile(/[\w_<>]/),b("type","variable-3",n=e.current());e.eatWhile(/[\w_]/);var n=e.current(),a=s.propertyIsEnumerable(n)&&s[n];return a&&t.kwAllowed?b(a.type,a.style,n):b("variable","variable",n);var i}function x(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=y;break}n="*"==r}return b("comment","comment")}var h={atom:!0,number:!0,variable:!0,string:!0,regexp:!0};function k(e,t,r,n,a,i){this.indented=e,this.column=t,this.type=r,this.prev=a,this.info=i,null!=n&&(this.align=n)}function w(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0}function g(e,t){if(/[a-z]/.test(t.charAt(0)))return!1;for(var r=e.importedtypes.length,n=0;n<r;n++)if(e.importedtypes[n]==t)return!0}function V(e){for(var t=A.state,r=t.importedtypes;r;r=r.next)if(r.name==e)return;t.importedtypes={name:e,next:t.importedtypes}}var A={state:null,column:null,marked:null,cc:null};function S(){for(var e=arguments.length-1;e>=0;e--)A.cc.push(arguments[e])}function E(){return S.apply(null,arguments),!0}function W(e,t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}function z(e){var t=A.state;if(t.context){if(A.marked="def",W(e,t.localVars))return;t.localVars={name:e,next:t.localVars}}else if(t.globalVars){if(W(e,t.globalVars))return;t.globalVars={name:e,next:t.globalVars}}}var M={name:"this",next:null};function C(){A.state.context||(A.state.localVars=M),A.state.context={prev:A.state.context,vars:A.state.localVars}}function T(){A.state.localVars=A.state.context.vars,A.state.context=A.state.context.prev}T.lex=!0;function Z(e,t){var r=function(){var r=A.state;r.lexical=new k(r.indented,A.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function I(){var e=A.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}I.lex=!0;function O(e){return function t(r){return r==e?E():";"==e?S():E(t)}}function P(e){return"@"==e?E(B):"var"==e?E(Z("vardef"),N,O(";"),I):"keyword a"==e?E(Z("form"),_,P,I):"keyword b"==e?E(Z("form"),P,I):"{"==e?E(Z("}"),C,L,I,T):";"==e?E():"attribute"==e?E(q):"function"==e?E(Y):"for"==e?E(Z("form"),O("("),Z(")"),R,O(")"),I,P,I):"variable"==e?E(Z("stat"),G):"switch"==e?E(Z("form"),_,Z("}","switch"),O("{"),L,I,I):"case"==e?E(_,O(":")):"default"==e?E(O(":")):"catch"==e?E(Z("form"),C,O("("),ne,O(")"),P,I,T):"import"==e?E(U,O(";")):"typedef"==e?E($):S(Z("stat"),_,O(";"),I)}function _(e){return h.hasOwnProperty(e)?E(D):"type"==e?E(D):"function"==e?E(Y):"keyword c"==e?E(j):"("==e?E(Z(")"),j,O(")"),I,D):"operator"==e?E(_):"["==e?E(Z("]"),K(j,"]"),I,D):"{"==e?E(Z("}"),K(J,"}"),I,D):E()}function j(e){return e.match(/[;\}\)\],]/)?S():S(_)}function D(e,t){if("operator"==e&&/\+\+|--/.test(t))return E(D);if("operator"==e||":"==e)return E(_);if(";"!=e)return"("==e?E(Z(")"),K(_,")"),I,D):"."==e?E(H,D):"["==e?E(Z("]"),_,O("]"),I,D):void 0}function q(e){return"attribute"==e?E(q):"function"==e?E(Y):"var"==e?E(N):void 0}function B(e){return":"==e?E(B):"variable"==e?E(B):"("==e?E(Z(")"),K(F,")"),I,P):void 0}function F(e){if("variable"==e)return E()}function U(e,t){return"variable"==e&&/[A-Z]/.test(t.charAt(0))?(V(t),E()):"variable"==e||"property"==e||"."==e||"*"==t?E(U):void 0}function $(e,t){return"variable"==e&&/[A-Z]/.test(t.charAt(0))?(V(t),E()):"type"==e&&/[A-Z]/.test(t.charAt(0))?E():void 0}function G(e){return":"==e?E(I,P):S(D,O(";"),I)}function H(e){if("variable"==e)return A.marked="property",E()}function J(e){if("variable"==e&&(A.marked="property"),h.hasOwnProperty(e))return E(O(":"),_)}function K(e,t){function r(n){return","==n?E(e,r):n==t?E():E(O(t))}return function(n){return n==t?E():S(e,r)}}function L(e){return"}"==e?E():S(P,L)}function N(e,t){return"variable"==e?(z(t),E(ee,Q)):E()}function Q(e,t){return"="==t?E(_,Q):","==e?E(N):void 0}function R(e,t){return"variable"==e?(z(t),E(X,_)):S()}function X(e,t){if("in"==t)return E()}function Y(e,t){return"variable"==e||"type"==e?(z(t),E(Y)):"new"==t?E(Y):"("==e?E(Z(")"),C,K(ne,")"),I,ee,P,T):void 0}function ee(e){if(":"==e)return E(te)}function te(e){return"type"==e?E():"variable"==e?E():"{"==e?E(Z("}"),K(re,"}"),I):void 0}function re(e){if("variable"==e)return E(ee)}function ne(e,t){if("variable"==e)return z(t),E(ee)}return{startState:function(e){var n={tokenize:y,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new k((e||0)-r,0,"block",!1),localVars:t.localVars,importedtypes:["Int","Float","String","Void","Std","Bool","Dynamic","Array"],context:t.localVars&&{vars:t.localVars},indented:0};return t.globalVars&&"object"==typeof t.globalVars&&(n.globalVars=t.globalVars),n},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==f?r:(t.reAllowed=!("operator"!=f&&"keyword c"!=f&&!f.match(/^[\[{}\(,;:]$/)),t.kwAllowed="."!=f,function(e,t,r,n,a){var i=e.cc;for(A.state=e,A.stream=a,A.marked=null,A.cc=i,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((i.length?i.pop():P)(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return A.marked?A.marked:"variable"==r&&w(e,n)?"variable-2":"variable"==r&&g(e,n)?"variable-3":t}}(t,r,f,v,e))},indent:function(e,t){if(e.tokenize!=y)return 0;var n=t&&t.charAt(0),a=e.lexical;"stat"==a.type&&"}"==n&&(a=a.prev);var i=a.type,o=n==i;return"vardef"==i?a.indented+4:"form"==i&&"{"==n?a.indented:"stat"==i||"form"==i?a.indented+r:"switch"!=a.info||o?a.align?a.column+(o?0:1):a.indented+(o?0:r):a.indented+(/^(?:case|default)\b/.test(t)?r:2*r)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),e.defineMIME("text/x-haxe","haxe"),e.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(e,t){var r=e.peek(),n=e.sol();if("#"==r)return e.skipToEnd(),"comment";if(n&&"-"==r){var a="variable-2";return e.eat(/-/),"-"==e.peek()&&(e.eat(/-/),a="keyword a"),"D"==e.peek()&&(e.eat(/[D]/),a="keyword c",t.define=!0),e.eatWhile(/[A-Z]/i),a}r=e.peek();return 0==t.inString&&"'"==r&&(t.inString=!0,e.next()),1==t.inString?(e.skipTo("'")||e.skipToEnd(),"'"==e.peek()&&(e.next(),t.inString=!1),"string"):(e.next(),null)},lineComment:"#"}}),e.defineMIME("text/x-hxml","hxml")});