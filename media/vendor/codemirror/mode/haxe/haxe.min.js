!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("haxe",function(e,t){function n(e){return{type:e,style:"keyword"}}function r(e,t,n){return t.tokenize=n,n(e,t)}function a(e,t){for(var n,r=!1;null!=(n=e.next());){if(n==t&&!r)return!0;r=!r&&"\\"==n}}function i(e,t,n){return R=e,$=n,t}function o(e,t){var n=e.next();if('"'==n||"'"==n)return r(e,t,function(e){return function(t,n){return a(t,e)&&(n.tokenize=o),i("string","string")}}(n));if(/[\[\]{}\(\),;\:\.]/.test(n))return i(n);if("0"==n&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),i("number","number");if(/\d/.test(n)||"-"==n&&e.eat(/\d/))return e.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),i("number","number");if(t.reAllowed&&"~"==n&&e.eat(/\//))return a(e,"/"),e.eatWhile(/[gimsu]/),i("regexp","string-2");if("/"==n)return e.eat("*")?r(e,t,l):e.eat("/")?(e.skipToEnd(),i("comment","comment")):(e.eatWhile(Y),i("operator",null,e.current()));if("#"==n)return e.skipToEnd(),i("conditional","meta");if("@"==n)return e.eat(/:/),e.eatWhile(/[\w_]/),i("metadata","meta");if(Y.test(n))return e.eatWhile(Y),i("operator",null,e.current());if(/[A-Z]/.test(n))return e.eatWhile(/[\w_<>]/),u=e.current(),i("type","variable-3",u);e.eatWhile(/[\w_]/);var u=e.current(),c=X.propertyIsEnumerable(u)&&X[u];return c&&t.kwAllowed?i(c.type,c.style,u):i("variable","variable",u)}function l(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=o;break}r="*"==n}return i("comment","comment")}function u(e,t,n,r,a,i){this.indented=e,this.column=t,this.type=n,this.prev=a,this.info=i,null!=r&&(this.align=r)}function c(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function f(e){for(var t=te.state,n=t.importedtypes;n;n=n.next)if(n.name==e)return;t.importedtypes={name:e,next:t.importedtypes}}function s(){for(var e=arguments.length-1;e>=0;e--)te.cc.push(arguments[e])}function d(){return s.apply(null,arguments),!0}function p(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function m(e){var t=te.state;if(t.context){if(te.marked="def",p(e,t.localVars))return;t.localVars={name:e,next:t.localVars}}else if(t.globalVars){if(p(e,t.globalVars))return;t.globalVars={name:e,next:t.globalVars}}}function v(){te.state.context||(te.state.localVars=ne),te.state.context={prev:te.state.context,vars:te.state.localVars}}function b(){te.state.localVars=te.state.context.vars,te.state.context=te.state.context.prev}function y(e,t){var n=function(){var n=te.state;n.lexical=new u(n.indented,te.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function x(){var e=te.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function h(e){function t(n){return n==e?d():";"==e?s():d(t)}return t}function k(e){return"@"==e?d(S):"var"==e?d(y("vardef"),O,h(";"),x):"keyword a"==e?d(y("form"),w,k,x):"keyword b"==e?d(y("form"),k,x):"{"==e?d(y("}"),v,I,x,b):";"==e?d():"attribute"==e?d(A):"function"==e?d(D):"for"==e?d(y("form"),h("("),y(")"),_,h(")"),x,k,x):"variable"==e?d(y("stat"),M):"switch"==e?d(y("form"),w,y("}","switch"),h("{"),I,x,x):"case"==e?d(w,h(":")):"default"==e?d(h(":")):"catch"==e?d(y("form"),v,h("("),U,h(")"),k,x,b):"import"==e?d(W,h(";")):"typedef"==e?d(z):s(y("stat"),w,h(";"),x)}function w(e){return ee.hasOwnProperty(e)?d(V):"type"==e?d(V):"function"==e?d(D):"keyword c"==e?d(g):"("==e?d(y(")"),g,h(")"),x,V):"operator"==e?d(w):"["==e?d(y("]"),Z(g,"]"),x,V):"{"==e?d(y("}"),Z(T,"}"),x,V):d()}function g(e){return e.match(/[;\}\)\],]/)?s():s(w)}function V(e,t){if("operator"==e&&/\+\+|--/.test(t))return d(V);if("operator"==e||":"==e)return d(w);if(";"!=e)return"("==e?d(y(")"),Z(w,")"),x,V):"."==e?d(C,V):"["==e?d(y("]"),w,h("]"),x,V):void 0}function A(e){return"attribute"==e?d(A):"function"==e?d(D):"var"==e?d(O):void 0}function S(e){return":"==e?d(S):"variable"==e?d(S):"("==e?d(y(")"),Z(E,")"),x,k):void 0}function E(e){if("variable"==e)return d()}function W(e,t){return"variable"==e&&/[A-Z]/.test(t.charAt(0))?(f(t),d()):"variable"==e||"property"==e||"."==e||"*"==t?d(W):void 0}function z(e,t){return"variable"==e&&/[A-Z]/.test(t.charAt(0))?(f(t),d()):"type"==e&&/[A-Z]/.test(t.charAt(0))?d():void 0}function M(e){return":"==e?d(x,k):s(V,h(";"),x)}function C(e){if("variable"==e)return te.marked="property",d()}function T(e){if("variable"==e&&(te.marked="property"),ee.hasOwnProperty(e))return d(h(":"),w)}function Z(e,t){function n(r){return","==r?d(e,n):r==t?d():d(h(t))}return function(r){return r==t?d():s(e,n)}}function I(e){return"}"==e?d():s(k,I)}function O(e,t){return"variable"==e?(m(t),d(q,P)):d()}function P(e,t){return"="==t?d(w,P):","==e?d(O):void 0}function _(e,t){return"variable"==e?(m(t),d(j,w)):s()}function j(e,t){if("in"==t)return d()}function D(e,t){return"variable"==e||"type"==e?(m(t),d(D)):"new"==t?d(D):"("==e?d(y(")"),v,Z(U,")"),x,q,k,b):void 0}function q(e){if(":"==e)return d(B)}function B(e){return"type"==e?d():"variable"==e?d():"{"==e?d(y("}"),Z(F,"}"),x):void 0}function F(e){if("variable"==e)return d(q)}function U(e,t){if("variable"==e)return m(t),d(q)}var $,G=e.indentUnit,H=n("keyword a"),J=n("keyword b"),K=n("keyword c"),L=n("operator"),N={type:"atom",style:"atom"},Q={type:"attribute",style:"attribute"},R=n("typedef"),X={if:H,while:H,else:J,do:J,try:J,return:K,break:K,continue:K,new:K,throw:K,var:n("var"),inline:Q,static:Q,using:n("import"),public:Q,private:Q,cast:n("cast"),import:n("import"),macro:n("macro"),function:n("function"),catch:n("catch"),untyped:n("untyped"),callback:n("cb"),for:n("for"),switch:n("switch"),case:n("case"),default:n("default"),in:L,never:n("property_access"),trace:n("trace"),class:R,abstract:R,enum:R,interface:R,typedef:R,extends:R,implements:R,dynamic:R,true:N,false:N,null:N},Y=/[+\-*&%=<>!?|]/,ee={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},te={state:null,column:null,marked:null,cc:null},ne={name:"this",next:null};return b.lex=!0,x.lex=!0,{startState:function(e){var n={tokenize:o,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new u((e||0)-G,0,"block",!1),localVars:t.localVars,importedtypes:["Int","Float","String","Void","Std","Bool","Dynamic","Array"],context:t.localVars&&{vars:t.localVars},indented:0};return t.globalVars&&"object"==typeof t.globalVars&&(n.globalVars=t.globalVars),n},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==R?n:(t.reAllowed=!("operator"!=R&&"keyword c"!=R&&!R.match(/^[\[{}\(,;:]$/)),t.kwAllowed="."!=R,function(e,t,n,r,a){var i=e.cc;for(te.state=e,te.stream=a,te.marked=null,te.cc=i,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((i.length?i.pop():k)(n,r)){for(;i.length&&i[i.length-1].lex;)i.pop()();return te.marked?te.marked:"variable"==n&&c(e,r)?"variable-2":"variable"==n&&function(e,t){if(/[a-z]/.test(t.charAt(0)))return!1;for(var n=e.importedtypes.length,r=0;r<n;r++)if(e.importedtypes[r]==t)return!0}(e,r)?"variable-3":t}}(t,n,R,$,e))},indent:function(e,t){if(e.tokenize!=o)return 0;var n=t&&t.charAt(0),r=e.lexical;"stat"==r.type&&"}"==n&&(r=r.prev);var a=r.type,i=n==a;return"vardef"==a?r.indented+4:"form"==a&&"{"==n?r.indented:"stat"==a||"form"==a?r.indented+G:"switch"!=r.info||i?r.align?r.column+(i?0:1):r.indented+(i?0:G):r.indented+(/^(?:case|default)\b/.test(t)?G:2*G)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),e.defineMIME("text/x-haxe","haxe"),e.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(e,t){var n=e.peek(),r=e.sol();if("#"==n)return e.skipToEnd(),"comment";if(r&&"-"==n){var a="variable-2";return e.eat(/-/),"-"==e.peek()&&(e.eat(/-/),a="keyword a"),"D"==e.peek()&&(e.eat(/[D]/),a="keyword c",t.define=!0),e.eatWhile(/[A-Z]/i),a}n=e.peek();return 0==t.inString&&"'"==n&&(t.inString=!0,e.next()),1==t.inString?(e.skipTo("'")||e.skipToEnd(),"'"==e.peek()&&(e.next(),t.inString=!1),"string"):(e.next(),null)},lineComment:"#"}}),e.defineMIME("text/x-hxml","hxml")});