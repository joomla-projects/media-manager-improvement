!function(n){"object"==typeof exports&&"object"==typeof module?n(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)}(function(n){"use strict";function e(e,i,t,l){function f(n){var o=d(e,i);if(!o||o.to.line-o.from.line<u)return null;for(var r=e.findMarksAt(o.from),t=0;t<r.length;++t)if(r[t].__isFold&&"fold"!==l){if(!n)return null;o.cleared=!0,r[t].clear()}return o}if(t&&t.call){d=t;t=null}else var d=r(e,t,"rangeFinder");"number"==typeof i&&(i=n.Pos(i,0));var u=r(e,t,"minFoldSize"),a=f(!0);if(r(e,t,"scanUp"))for(;!a&&i.line>e.firstLine();)i=n.Pos(i.line-1,0),a=f(!1);if(a&&!a.cleared&&"unfold"!==l){var c=o(e,t);n.on(c,"mousedown",function(e){s.clear(),n.e_preventDefault(e)});var s=e.markText(a.from,a.to,{replacedWith:c,clearOnEnter:r(e,t,"clearOnEnter"),__isFold:!0});s.on("clear",function(o,r){n.signal(e,"unfold",e,o,r)}),n.signal(e,"fold",e,a.from,a.to)}}function o(n,e){var o=r(n,e,"widget");if("string"==typeof o){var i=document.createTextNode(o);(o=document.createElement("span")).appendChild(i),o.className="CodeMirror-foldmarker"}else o&&(o=o.cloneNode(!0));return o}function r(n,e,o){if(e&&void 0!==e[o])return e[o];var r=n.options.foldOptions;return r&&void 0!==r[o]?r[o]:i[o]}n.newFoldFunction=function(n,o){return function(r,i){e(r,i,{rangeFinder:n,widget:o})}},n.defineExtension("foldCode",function(n,o,r){e(this,n,o,r)}),n.defineExtension("isFolded",function(n){for(var e=this.findMarksAt(n),o=0;o<e.length;++o)if(e[o].__isFold)return!0}),n.commands.toggleFold=function(n){n.foldCode(n.getCursor())},n.commands.fold=function(n){n.foldCode(n.getCursor(),null,"fold")},n.commands.unfold=function(n){n.foldCode(n.getCursor(),null,"unfold")},n.commands.foldAll=function(e){e.operation(function(){for(var o=e.firstLine(),r=e.lastLine();o<=r;o++)e.foldCode(n.Pos(o,0),null,"fold")})},n.commands.unfoldAll=function(e){e.operation(function(){for(var o=e.firstLine(),r=e.lastLine();o<=r;o++)e.foldCode(n.Pos(o,0),null,"unfold")})},n.registerHelper("fold","combine",function(){var n=Array.prototype.slice.call(arguments,0);return function(e,o){for(var r=0;r<n.length;++r){var i=n[r](e,o);if(i)return i}}}),n.registerHelper("fold","auto",function(n,e){for(var o=n.getHelpers(e,"fold"),r=0;r<o.length;r++){var i=o[r](n,e);if(i)return i}});var i={rangeFinder:n.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};n.defineOption("foldOptions",null),n.defineExtension("foldOption",function(n,e){return r(this,n,e)})}),function(n){"object"==typeof exports&&"object"==typeof module?n(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)}(function(n){"use strict";function e(e,i,t,l){function f(n){var o=d(e,i);if(!o||o.to.line-o.from.line<u)return null;for(var r=e.findMarksAt(o.from),t=0;t<r.length;++t)if(r[t].__isFold&&"fold"!==l){if(!n)return null;o.cleared=!0,r[t].clear()}return o}if(t&&t.call){d=t;t=null}else var d=r(e,t,"rangeFinder");"number"==typeof i&&(i=n.Pos(i,0));var u=r(e,t,"minFoldSize"),a=f(!0);if(r(e,t,"scanUp"))for(;!a&&i.line>e.firstLine();)i=n.Pos(i.line-1,0),a=f(!1);if(a&&!a.cleared&&"unfold"!==l){var c=o(e,t);n.on(c,"mousedown",function(e){s.clear(),n.e_preventDefault(e)});var s=e.markText(a.from,a.to,{replacedWith:c,clearOnEnter:r(e,t,"clearOnEnter"),__isFold:!0});s.on("clear",function(o,r){n.signal(e,"unfold",e,o,r)}),n.signal(e,"fold",e,a.from,a.to)}}function o(n,e){var o=r(n,e,"widget");if("string"==typeof o){var i=document.createTextNode(o);(o=document.createElement("span")).appendChild(i),o.className="CodeMirror-foldmarker"}else o&&(o=o.cloneNode(!0));return o}function r(n,e,o){if(e&&void 0!==e[o])return e[o];var r=n.options.foldOptions;return r&&void 0!==r[o]?r[o]:i[o]}n.newFoldFunction=function(n,o){return function(r,i){e(r,i,{rangeFinder:n,widget:o})}},n.defineExtension("foldCode",function(n,o,r){e(this,n,o,r)}),n.defineExtension("isFolded",function(n){for(var e=this.findMarksAt(n),o=0;o<e.length;++o)if(e[o].__isFold)return!0}),n.commands.toggleFold=function(n){n.foldCode(n.getCursor())},n.commands.fold=function(n){n.foldCode(n.getCursor(),null,"fold")},n.commands.unfold=function(n){n.foldCode(n.getCursor(),null,"unfold")},n.commands.foldAll=function(e){e.operation(function(){for(var o=e.firstLine(),r=e.lastLine();o<=r;o++)e.foldCode(n.Pos(o,0),null,"fold")})},n.commands.unfoldAll=function(e){e.operation(function(){for(var o=e.firstLine(),r=e.lastLine();o<=r;o++)e.foldCode(n.Pos(o,0),null,"unfold")})},n.registerHelper("fold","combine",function(){var n=Array.prototype.slice.call(arguments,0);return function(e,o){for(var r=0;r<n.length;++r){var i=n[r](e,o);if(i)return i}}}),n.registerHelper("fold","auto",function(n,e){for(var o=n.getHelpers(e,"fold"),r=0;r<o.length;r++){var i=o[r](n,e);if(i)return i}});var i={rangeFinder:n.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};n.defineOption("foldOptions",null),n.defineExtension("foldOption",function(n,e){return r(this,n,e)})});