!function(t,e,n,o){"use strict";var i={setupEditors:function(t){t=t||o;for(var n=e.getOptions?e.getOptions("plg_editor_tinymce",{}):e.optionsStorage.plg_editor_tinymce||{},i=t.querySelectorAll(".js-editor-tinymce"),r=0,a=i.length;r<a;r++){var s=i[r].querySelector("textarea");this.setupEditor(s,n)}},setupEditor:function(n,i){if(!e.editors.instances[n.id]){var r=n?n.getAttribute("name").replace(/\[\]|\]/g,"").split("[").pop():"default",a=i&&i.tinyMCE||{},s=a.default||{},c=a[r]?a[r]:s;c=c.joomlaMergeDefaults?e.extend(e.extend({},s),c):e.extend({},c),n&&(c.selector=null,c.target=n);var u=[];Object.keys(c.joomlaExtButtons.names).map(function(t){return c.joomlaExtButtons.names[t]}).forEach(function(t){var n={};n.text=t.name,n.icon=t.icon,t.href?n.onclick=function(){var n=o.getElementById(t.id+"Modal");jQuery(n).modal("show"),e.currentModal=n}:n.onclick=function(){new Function(t.click)()},u.push(n)}),c.setup=function(t){t.addButton("jxtdbuttons",{type:"menubutton",text:e.JText._("PLG_TINY_CORE_BUTTONS"),icon:"none icon-joomla",menu:u})};var d=new t.Editor(n.id,c,tinymce.EditorManager);d.render(),e.editors.instances[n.id]={getValue:function(){return this.instance.getContent()},setValue:function(t){return this.instance.setContent(t)},replaceSelection:function(t){return this.instance.execCommand("mceInsertContent",!1,t)},id:n.id,instance:d,onSave:function(){return this.instance.isHidden()&&this.instance.show(),""}},o.getElementById(d.id).form.addEventListener("submit",function(){return e.editors.instances[d.targetElm.id].onSave()})}}};e.JoomlaTinyMCE=i,o.addEventListener("DOMContentLoaded",function(){e.JoomlaTinyMCE.setupEditors(o)}),o.addEventListener("joomla:updated",function(t){e.JoomlaTinyMCE.setupEditors(t.target)})}(tinyMCE,Joomla,window,document);