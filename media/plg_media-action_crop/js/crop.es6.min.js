Joomla=window.Joomla||{},Joomla.MediaManager=Joomla.MediaManager||{},Joomla.MediaManager.Edit=Joomla.MediaManager.Edit||{},(()=>{"use strict";const e=()=>{const e=document.getElementById("image-preview");Joomla.MediaManager.Edit.crop.cropper=new Cropper(e,{viewMode:1,responsive:!0,restore:!0,autoCrop:!0,movable:!1,zoomable:!1,rotatable:!1,autoCropArea:1,minContainerWidth:e.offsetWidth,minContainerHeight:e.offsetHeight,crop(e){document.getElementById("jform_crop_x").value=Math.round(e.detail.x),document.getElementById("jform_crop_y").value=Math.round(e.detail.y),document.getElementById("jform_crop_width").value=Math.round(e.detail.width),document.getElementById("jform_crop_height").value=Math.round(e.detail.height);const a="jpg"===Joomla.MediaManager.Edit.original.extension?"jpeg":Joomla.MediaManager.Edit.original.extension,t=document.getElementById("jform_crop_quality").value;Joomla.MediaManager.Edit.current.contents=this.cropper.getCroppedCanvas().toDataURL(`image/${a}`,t),window.dispatchEvent(new Event("mediaManager.history.point"))}}),document.getElementById("jform_crop_x").addEventListener("change",e=>{Joomla.MediaManager.Edit.crop.cropper.setData({x:parseInt(e.target.value,10)})}),document.getElementById("jform_crop_y").addEventListener("change",e=>{Joomla.MediaManager.Edit.crop.cropper.setData({y:parseInt(e.target.value,10)})}),document.getElementById("jform_crop_width").addEventListener("change",e=>{Joomla.MediaManager.Edit.crop.cropper.setData({width:parseInt(e.target.value,10)})}),document.getElementById("jform_crop_height").addEventListener("change",e=>{Joomla.MediaManager.Edit.crop.cropper.setData({height:parseInt(e.target.value,10)})}),document.getElementById("jform_aspectRatio").addEventListener("change",e=>{Joomla.MediaManager.Edit.crop.cropper.setAspectRatio(e.target.value)}),e.addEventListener("load",()=>{const a=[].slice.call(document.querySelectorAll(".crop-aspect-ratio-option")),t=e.naturalWidth/e.naturalHeight;!Number.isNaN(t)&&Number.isFinite(t)&&(a[0].value=t),Joomla.MediaManager.Edit.crop.cropper.setAspectRatio(a[0].value)})};Joomla.MediaManager.Edit.crop={Activate(a){e()},Deactivate(){Joomla.MediaManager.Edit.crop.cropper&&Joomla.MediaManager.Edit.crop.cropper.destroy()}}})();