Joomla=window.Joomla||{},Joomla.MediaManager=Joomla.MediaManager||{},Joomla.MediaManager.Edit=Joomla.MediaManager.Edit||{},(()=>{"use strict";const e=(e,t)=>{const a=document.getElementById("image-source"),n=document.createElement("canvas");n.width=e,n.height=t,n.getContext("2d").drawImage(a,0,0,e,t);const i="jpg"===Joomla.MediaManager.Edit.original.extension?"jpeg":Joomla.MediaManager.Edit.original.extension,d=document.getElementById("jform_resize_quality").value;Joomla.MediaManager.Edit.current.contents=n.toDataURL(`image/${i}`,d);const o=document.getElementById("image-preview");o.width=e,o.height=t,o.src=Joomla.MediaManager.Edit.current.contents,document.getElementById("jform_resize_width").value=parseInt(e,10),document.getElementById("jform_resize_height").value=parseInt(t,10),window.dispatchEvent(new Event("mediaManager.history.point"))};Joomla.MediaManager.Edit.resize={Activate(t){setTimeout(()=>{const t=document.getElementById("image-source"),a=document.getElementById("jform_resize_width"),n=document.getElementById("jform_resize_height");a.value=t.width,n.value=t.height,a.addEventListener("change",a=>{e(parseInt(a.target.value,10),parseInt(a.target.value,10)/(t.width/t.height))}),n.addEventListener("change",a=>{e(parseInt(a.target.value,10)*(t.width/t.height),parseInt(a.target.value,10))});const i=document.getElementById("jform_resize_w"),d=document.getElementById("jform_resize_h");i.min=0,i.max=t.width,i.value=t.width,d.min=0,d.max=t.height,d.value=t.height,i.addEventListener("input",a=>{e(parseInt(a.target.value,10),parseInt(a.target.value,10)/(t.width/t.height))}),d.addEventListener("input",a=>{e(parseInt(a.target.value,10)*(t.width/t.height),parseInt(a.target.value,10))})},1e3)},Deactivate(){}}})();